(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"4LSw":function(t,e,n){"use strict";n.r(e),n.d(e,"QDSocialModule",(function(){return Pe}));var o=n("tyNb"),i=n("n2fA"),r=n("fXoL"),c=n("aceb"),s=n("gvxT"),a=n("ofXK"),l=n("bTqV"),p=n("zVjI");const d=function(){return["/social/stream/network"]},g=function(){return["active-channel"]},u=function(){return["/social/profile"]},h=function(){return{exact:!0}};let b=(()=>{class t{constructor(t,e,n,o){this.router=t,this.ngZone=e,this.sidebarService=n,this.q=o,this.selectedStream="Network"}showAlgo(t){this.q.os.bee.config.getSideBarFixed().left&&this.sidebarService.collapse("left"),this.selectedStream=t,this.ngZone.run(()=>this.router.navigate(["/social/stream/"+t.toLowerCase()]))}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(o.c),r.Sb(r.C),r.Sb(c.D),r.Sb(s.a))},t.\u0275cmp=r.Mb({type:t,selectors:[["social-sidebar-left"]],decls:18,vars:10,consts:[[1,"algorithmsHeader"],[1,"treeNodeContainerSingle","Network",3,"routerLink","routerLinkActive"],["icon","activity"],[1,"checklist-leaf-node"],[1,"nodeContent"],[1,"newAlgoButton"],["icon","plus-outline",1,"newAlgoIcon"],[1,"treeNodeContainerSingle","Network",3,"routerLink","routerLinkActive","routerLinkActiveOptions"],["icon","shake-outline"],[1,"nodeContent","station",2,"width","100%"]],template:function(t,e){1&t&&(r.Yb(0,"div",0),r.Ic(1,"\nAlgorithms:\n"),r.Xb(),r.Yb(2,"div",1),r.Tb(3,"nb-icon",2),r.Yb(4,"span",3),r.Yb(5,"span",4),r.Ic(6," Network "),r.Xb(),r.Xb(),r.Xb(),r.Yb(7,"button",5),r.Tb(8,"nb-icon",6),r.Ic(9," New Algorithm\n"),r.Xb(),r.Yb(10,"div",7),r.Tb(11,"nb-icon",8),r.Yb(12,"span",3),r.Yb(13,"span",9),r.Ic(14," My Station "),r.Xb(),r.Xb(),r.Xb(),r.Yb(15,"div",0),r.Ic(16,"\nFavorites:\n"),r.Xb(),r.Tb(17,"social-profile-favorites")),2&t&&(r.Fb(2),r.pc("routerLink",r.rc(5,d))("routerLinkActive",r.rc(6,g)),r.Fb(8),r.pc("routerLink",r.rc(7,u))("routerLinkActive",r.rc(8,g))("routerLinkActiveOptions",r.rc(9,h)))},directives:[o.d,o.e,c.o,p.a],styles:[".favoriteTab[_ngcontent-%COMP%]{overflow:hidden!important;overflow-y:auto!important}.algorithmsHeader[_ngcontent-%COMP%]{margin-top:20px;color:#4982e7;margin-bottom:10px;font-family:Ubuntu}.treeNodeContainerSingle[_ngcontent-%COMP%]{border-radius:5px;padding:6px 10px 6px 15px;margin:0;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:rgba(71,129,233,.9882352941176471)!important;font-size:16px;font-family:Ubuntu;cursor:pointer;background:#262246}.newAlgoButton[_ngcontent-%COMP%]{margin-top:10px;background:transparent;border:0;color:#256dff;font-family:Ubuntu;font-size:16px;padding:10px;margin-bottom:10px}.newAlgoIcon[_ngcontent-%COMP%]{position:relative;font-size:16px}.treeNodeContainerSingle[_ngcontent-%COMP%]:focus{outline:0;border:0}.algorithmsHeader[_ngcontent-%COMP%]:first-child{margin-top:22px}.nodeContent.station[_ngcontent-%COMP%]{position:relative;top:-2px}"]}),t})();function f(t,e){if(1&t){const t=r.Zb();r.Yb(0,"button",4),r.fc("click",(function(){return r.xc(t),r.jc().lockSideBar("left",!1)})),r.Ic(1,"Lock Panel"),r.Xb()}}function m(t,e){if(1&t){const t=r.Zb();r.Yb(0,"button",4),r.fc("click",(function(){return r.xc(t),r.jc().lockSideBar("left",!0)})),r.Ic(1,"Float Panel"),r.Xb()}}function C(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",5),r.fc("click",(function(){return r.xc(t),r.jc().toggleSideBar("left")})),r.Tb(1,"nb-icon",6),r.Xb()}}let x=(()=>{class t{constructor(t,e,n,o,i,r){this.ngZone=t,this.cd=e,this.sidebarService=n,this.q=o,this.activatedRoute=i,this.router=r,this.initRnd=0,this.postActive=!1,this.routeActive=!0,this.sideBarFixed={right:!0,left:!0},this.sideBarVisible={right:!1,left:!0},this.sideBarLockedClass="",this.sideBarLockedClassA="sideBarLocked",this.selectedProfile="NoProfileSelected",this.selectedPost="NoPostSelected"}ngOnDestroy(){this.sideBarFixedSub.unsubscribe(),this.sideBarVisibleSub.unsubscribe()}ngOnInit(){return Object(i.a)(this,void 0,void 0,(function*(){let t=this.q.os.social.profile.getSelected();void 0!==t&&(this.selectedProfile=t,this.postActive=!1),this.sideBarFixed=this.q.os.bee.config.getSideBarFixed(),this.sideBarVisible=this.q.os.bee.config.getSideBarVisible(),console.log("toggling:",this.sideBarVisible),this.sideBarVisible.left?this.sideBarVisible.left&&(this.sideBarFixed.left||(this.sideBarLockedClass=this.sideBarLockedClassA),this.sidebarService.expand("left")):(this.sideBarLockedClass="",this.sidebarService.collapse("left")),this.sideBarVisible.right||this.sidebarService.collapse("right"),this.sideBarVisible.right&&this.sidebarService.expand("right"),this.sideBarFixedSub=this.q.os.bee.config.sideBarFixedSub.subscribe(t=>{this.sideBarFixed=this.q.os.bee.config.getSideBarFixed()}),this.sideBarVisibleSub=this.q.os.bee.config.sideBarVisibleSub.subscribe(t=>{console.log("getting",t),this.sideBarVisible=this.q.os.bee.config.getSideBarVisible(),this.sideBarVisible.left?this.sideBarVisible.left&&this.sidebarService.expand("left"):this.sidebarService.collapse("left"),this.sideBarVisible.right||this.sidebarService.collapse("right"),this.sideBarVisible.right&&this.sidebarService.expand("right")}),setTimeout(()=>{this.sideBarFixed=this.q.os.bee.config.getSideBarFixed(),this.sideBarVisible=this.q.os.bee.config.getSideBarVisible(),console.log("toggling:",this.sideBarVisible),this.sideBarVisible.left?this.sideBarVisible.left&&this.sidebarService.expand("left"):this.sidebarService.collapse("left"),this.sideBarVisible.right||this.sidebarService.collapse("right"),this.sideBarVisible.right&&this.sidebarService.expand("right")},100),this.sidebarService.onCollapse().subscribe(()=>{console.log("collapsed"),this.sideBarFixed.left?(this.sideBarVisible.left=!1,this.sideBarLockedClass=""):this.sideBarLockedClass=this.sideBarLockedClassA})}))}lockSideBar(t,e){this.sideBarFixed[t]=e,this.q.os.bee.config.setSideBarFixed(this.sideBarFixed),this.sideBarLockedClass=e?"":this.sideBarLockedClassA,this.q.os.bee.config.commitNow()}toggleSideBar(t){this.sideBarVisible=this.q.os.bee.config.getSideBarVisible(),this.sideBarVisible[t]?(this.sideBarVisible[t]=!1,this.sideBarLockedClass=""):(this.sideBarFixed.left||(this.sideBarLockedClass=this.sideBarLockedClassA),this.sideBarVisible[t]=!0),this.q.os.bee.config.setSideBarVisible(this.sideBarVisible),this.q.os.bee.config.commitNow()}goToMyProfile(){this.ngZone.run(()=>this.router.navigate(["/social/profile"])),this.sideBarFixed.left?(this.sideBarVisible.left=!1,this.sideBarLockedClass="",this.sidebarService.collapse("left")):this.sideBarLockedClass=this.sideBarLockedClassA}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.C),r.Sb(r.h),r.Sb(c.D),r.Sb(s.a),r.Sb(o.a),r.Sb(o.c))},t.\u0275cmp=r.Mb({type:t,selectors:[["quest-messenger-root"]],decls:10,vars:8,consts:[["state","expanded","left","","tag","left","collapsed","true",1,"leftSideBar","mat-elevation-z6",3,"fixed"],["mat-stroked-button","","color","primary","class","defaultSettingsButton thinOutlineButton floatButton",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary",1,"defaultSettingsButton","thinOutlineButton",3,"click"],["class","toggleSideBarRight toggleSideBarLeft","class","toggleSideBarLeft",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary",1,"defaultSettingsButton","thinOutlineButton","floatButton",3,"click"],[1,"toggleSideBarLeft",3,"click"],["icon","list-outline"]],template:function(t,e){1&t&&(r.Yb(0,"nb-layout"),r.Yb(1,"nb-sidebar",0),r.Gc(2,f,2,0,"button",1),r.Gc(3,m,2,0,"button",1),r.Yb(4,"button",2),r.fc("click",(function(){return e.toggleSideBar("left")})),r.Ic(5,"Hide Panel"),r.Xb(),r.Tb(6,"social-sidebar-left"),r.Xb(),r.Yb(7,"nb-layout-column"),r.Gc(8,C,2,0,"div",3),r.Tb(9,"router-outlet"),r.Xb(),r.Xb()),2&t&&(r.Fb(1),r.pc("fixed",e.sideBarFixed.left),r.Fb(1),r.pc("ngIf",e.sideBarFixed.left),r.Fb(1),r.pc("ngIf",!e.sideBarFixed.left),r.Fb(4),r.Jb("routerOutletWrapper streamsBrowseColumn  ",e.sideBarLockedClass,"",e.sideBarVisible.left,""),r.Fb(1),r.pc("ngIf",!e.sideBarVisible.left))},directives:[c.u,c.B,a.m,l.a,b,c.t,o.h,c.o],styles:[".floatButton[_ngcontent-%COMP%]{left:131px;position:absolute}.toggleSideBarLeft[_ngcontent-%COMP%]{left:15px;position:absolute;top:32px;color:#d3c4c4;cursor:pointer;z-index:5}.centerButtonWrapper[_ngcontent-%COMP%]{position:fixed;bottom:3vh;left:0;right:0}.centerButtonContainer[_ngcontent-%COMP%]{margin:auto}.statusBarWrapper[_ngcontent-%COMP%]{position:fixed;bottom:0;max-height:28px;height:28px;left:0;right:0;background-color:#2d2a2a;z-index:20;font-size:14px;color:grey;padding-left:10px;padding-right:10px;border-top:1px solid #000}.statusBarRouterIcon[_ngcontent-%COMP%]{top:4px;margin:0;position:relative;line-height:10px;font-size:21px}.statusBarRadioIcon[_ngcontent-%COMP%]{top:-5px;margin:0 0 0 5px;position:relative;line-height:9px;font-size:17px}.web-top-links[_ngcontent-%COMP%]{position:fixed;right:13px;cursor:pointer;z-index:20;top:14px}@media only screen and (max-width:500px){.web-top-links[_ngcontent-%COMP%]{display:none}}nb-layout-column.profileLayoutColumn[_ngcontent-%COMP%]{background:linear-gradient(-10deg,#1d1a38,#3a0e0e);overflow:hidden;overflow-y:auto;position:absolute;top:0;bottom:28px;left:0;right:0}nb-layout-column[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}nb-layout-column[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:rgba(78,132,229,.5607843137254902)}nb-layout-column[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:rgba(78,132,229,.5607843137254902);outline:0}.toggleStreams[_ngcontent-%COMP%]{left:52px;background:#eed864;border-radius:4px;top:22px}.toggleStreams[_ngcontent-%COMP%], .toggleStreamsActive[_ngcontent-%COMP%]{position:absolute;font-size:15px;font-weight:700;color:rgba(39,105,247,.7803921568627451);font-family:Ubuntu;line-height:30px;padding:3px 10px;cursor:pointer}.toggleStreamsActive[_ngcontent-%COMP%]{left:22px;border-radius:4px;top:72px;border:1px solid #276ffd}.toggleStreamsActive[_ngcontent-%COMP%]:hover{background:rgba(37,109,254,.0784313725490196)}.toggleStreams[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:24px;opacity:.7;position:relative;top:2px}nb-layout[_ngcontent-%COMP%]{overflow:hidden;position:fixed}nb-layout-column[_ngcontent-%COMP%]{overflow-y:auto}.streamsBrowseColumn[_ngcontent-%COMP%]{background:#22283a}social-timeline-post-combined-timeline[_ngcontent-%COMP%]{padding-top:60px}"]}),t})();var P=n("2Vo4"),v=n("FQBZ"),O=n("ZREu"),M=n("jhN1"),y=n("3Pt+"),_=n("IyRd"),k=n("qFsG"),w=n("zwFz"),F=n("d3J+"),S=n("fP41");function j(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",8),r.fc("click",(function(){r.xc(t);const e=r.jc();return e.postDelete(e.postObj)})),r.Tb(1,"nb-icon",9),r.Xb()}}function B(t,e){1&t&&(r.Yb(0,"div",10),r.Tb(1,"img",11),r.Xb())}function I(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",12),r.fc("click",(function(){r.xc(t);const e=r.jc();return e.selectProfile(e.profile.key.pubKey)})),r.Ic(1),r.Xb()}if(2&t){const t=r.jc();r.Fb(1),r.Kc(" ",t.profile.alias," ")}}function z(t,e){if(1&t&&(r.Yb(0,"div",13),r.Ic(1),r.Xb()),2&t){const t=r.jc();r.Fb(1),r.Kc(" ",t.postObj.dTimestamp,"\n")}}function T(t,e){if(1&t&&(r.Yb(0,"div",13),r.Ic(1),r.Xb()),2&t){const t=r.jc();r.Fb(1),r.Kc(" ",t.postObj.timestamp,"\n")}}const q=function(){return{newWindow:!0}};function N(t,e){if(1&t&&(r.Tb(0,"div",27),r.kc(1,"linky")),2&t){const t=r.jc().$implicit;r.pc("innerHTML",r.mc(1,1,t.text,r.rc(4,q)),r.yc)}}function R(t,e){if(1&t&&r.Tb(0,"ngx-emoji",28),2&t){const t=r.jc().$implicit;r.pc("emoji",t.emojiColon)}}function Y(t,e){if(1&t&&(r.Yb(0,"div",24),r.Gc(1,N,2,5,"div",25),r.Gc(2,R,1,1,"ngx-emoji",26),r.Xb()),2&t){const t=e.$implicit;r.Fb(1),r.pc("ngIf",!t.isEmoji),r.Fb(1),r.pc("ngIf",t.isEmoji)}}function X(t,e){if(1&t&&(r.Yb(0,"div"),r.Gc(1,Y,3,2,"div",23),r.Xb()),2&t){const t=e.$implicit;r.Fb(1),r.pc("ngForOf",t)}}function A(t,e){if(1&t&&(r.Yb(0,"div",21),r.Gc(1,X,2,1,"div",22),r.Xb()),2&t){const t=r.jc(2);r.Fb(1),r.pc("ngForOf",t.postRows)}}function L(t,e){if(1&t&&(r.Yb(0,"div"),r.Tb(1,"ngx-emoji",29),r.Xb()),2&t){const t=r.jc(2);r.Fb(1),r.qc("emoji",t.postRows[0][0].emojiColon)}}function D(t,e){if(1&t){const t=r.Zb();r.Yb(0,"button",30),r.fc("click",(function(){r.xc(t);const e=r.jc(2);return e.selectPost(e.postObj.qHash)})),r.Ic(1),r.Xb()}if(2&t){const t=r.jc(2);r.Fb(1),r.Jc(t.replyCount)}}function E(t,e){if(1&t){const t=r.Zb();r.Yb(0,"emoji-mart",37),r.fc("emojiClick",(function(e){r.xc(t);const n=r.jc(3);return n.addEmoji(e,n.postObj.qHash)})),r.Xb()}}function K(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",31),r.Yb(1,"textarea",32),r.fc("ngModelChange",(function(e){r.xc(t);const n=r.jc(2);return n.reply[n.postObj.qHash]=e})),r.Xb(),r.Tb(2,"ngx-emoji",33),r.Gc(3,E,1,0,"ng-template",null,34,r.Hc),r.Yb(5,"button",35),r.fc("click",(function(){r.xc(t);const e=r.jc(2);return e.post(e.postObj.qHash)})),r.Ic(6,"Reply"),r.Xb(),r.Yb(7,"button",36),r.fc("click",(function(){return r.xc(t),r.jc(2).cancel()})),r.Ic(8,"Cancel"),r.Xb(),r.Xb()}if(2&t){const t=r.vc(4),e=r.jc(2);r.Fb(1),r.pc("ngModel",e.reply[e.postObj.qHash]),r.Fb(1),r.pc("nbPopover",t)}}function V(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",14),r.Gc(1,A,2,1,"div",15),r.Gc(2,L,2,1,"div",16),r.Yb(3,"button",17),r.fc("click",(function(){r.xc(t);const e=r.jc();return e.reply(e.postObj.qHash)})),r.Tb(4,"nb-icon",18),r.Xb(),r.Gc(5,D,2,1,"button",19),r.Gc(6,K,9,2,"div",20),r.Xb()}if(2&t){const t=r.jc();r.Fb(1),r.pc("ngIf",t.postRows.length>0&&1!=t.postRows.length||1!=t.postRows[0].length||t.postRows.length>1||!t.postRows[0][0].isEmoji),r.Fb(1),r.pc("ngIf",1==t.postRows.length&&1==t.postRows[0].length&&t.postRows[0][0].isEmoji),r.Fb(3),r.pc("ngIf",t.replyCount>0),r.Fb(1),r.pc("ngIf",t.selectedNode==t.postObj.qHash)}}function G(t,e){1&t&&(r.Yb(0,"div",38),r.Ic(1,"\n[Post Deleted]\n"),r.Xb())}let H=(()=>{class t{constructor(t,e,n,o,i,r){this.ngZone=t,this.router=e,this._sanitizer=n,this.dialog=o,this.cd=i,this.q=r,this.postObj={id:"123",timestamp:0,content:"Demo",dTimestamp:""},this.isMyProfile=!1,this.profile={},this.dev=!1,this.selectedNode="",this.replyCount=0,this.imeline=[]}reply(t){this.selectedNode=t,this.cd.detectChanges()}cancel(){this.selectedNode=""}selectPost(t){this.ngZone.run(()=>this.router.navigate(["/social/timeline/post/"+t]))}selectProfile(t){this.ngZone.run(()=>this.router.navigate(["/social/profile/"+t]))}addEmoji(t,e=""){void 0===this.reply[e]?this.reply[e]=t.emoji.colons+" ":this.reply[e]+=" "+t.emoji.colons+" ",this.cd.detectChanges()}post(t){return Object(i.a)(this,void 0,void 0,(function*(){this.q.os.ui.showSnack("Syncing Timeline...","Please Wait");let e=yield this.q.os.social.profile.getMyProfile();if(void 0===e.alias)throw alert("Please set your Alias first!"),"no name set";let n={content:this.reply[t],socialPubKey:e.key.pubKey,replyTo:t};yield this.q.os.social.timeline.post.new(n),this.selectedNode="",this.reply[t]="",this.cd.detectChanges(),setTimeout(()=>{this.q.os.social.timeline.agent.reload(),this.cd.detectChanges()},2e3)}))}ngOnInit(){return Object(i.a)(this,void 0,void 0,(function*(){if(void 0!==this.postObj.content){this.postRows=this.getArray(this.postObj.content),this.postObj.dTimestamp=new Date(this.postObj.timestamp).toString(),this.replyCount=this.q.os.social.timeline.agent.getReplyCount(this.postObj.qHash);try{this.profile=yield this.q.os.social.profile.get(this.postObj.socialPubKey),void 0===this.profile.alias&&(this.profile.alias="Anonymous"),void 0===this.profile.timestamp&&(this.profile.timestamp=0)}catch(t){this.profile={alias:"Anonymous",timestamp:0}}this.cd.detectChanges()}}))}ngOnChanges(){return Object(i.a)(this,void 0,void 0,(function*(){void 0!==this.postObj.content&&(this.postRows=this.getArray(this.postObj.content),this.postObj.dTimestamp=new Date(this.postObj.timestamp).toString(),this.profile=yield this.q.os.social.profile.get(this.postObj.socialPubKey),this.cd.detectChanges())}))}postDelete(t){console.log("qD Social/Profile: Deleting...",t),this.q.os.social.timeline.post.delete(t.qHash,t.socialPubKey),this.postObj.timestamp=0,this.postObj.dTimestamp=""}getArray(t){let e=[],n=[],o=[],i=String(t).trim();try{let t=["\n:","\n :","\n  :"];for(let e of t)i=i.replace(new RegExp(e,"g")," :")}catch(r){}try{let t=[":D",":\\)","=\\)",":-\\)","=D"];for(let n of t)i=i.replace(new RegExp(n,"g"),":grinning:");let e=/:(?![\n])[()#$@-\w]+:/g.exec(i);for(let n of e)n.substr(1,n.length-2).indexOf(":")<0&&(i=i.replace(n," "+n+" "))}catch(r){this.dev&&console.log(r)}n=i.trim().split("\n"),o=[];for(let c of n)o.push(c.trim().split(" "));for(let c=0;c<o.length;c++)for(let t=0;t<o[c].length;t++){let n=String(o[c][t]).trim();if(0==n.indexOf(":")&&n.substr(1).indexOf(":")==n.length-2){let i={isEmoji:!0,emojiColon:n.substr(1,n.length-2)};if(1==e.length)return i;o[c][t]=i}else o[c][t]={isEmoji:!1,text:n}}return o}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.C),r.Sb(o.c),r.Sb(M.b),r.Sb(c.l),r.Sb(r.h),r.Sb(s.a))},t.\u0275cmp=r.Mb({type:t,selectors:[["app-social-profile-post"]],inputs:{postObj:"postObj",isMyProfile:"isMyProfile"},features:[r.Db],decls:9,vars:7,consts:[["class","postDelete",3,"click",4,"ngIf"],["class","pp",4,"ngIf"],["class","postAlias",3,"click",4,"ngIf"],["class","postTime",4,"ngIf"],["class","postContent",4,"ngIf"],["class","postContent","style","margin-top:0px",4,"ngIf"],[1,"lockClosed"],["icon","shield-outline"],[1,"postDelete",3,"click"],["icon","trash-2-outline"],[1,"pp"],["src","./assets/defaultAvatar.png",1,"mat-elevation-z14"],[1,"postAlias",3,"click"],[1,"postTime"],[1,"postContent"],["class","text",4,"ngIf"],[4,"ngIf"],["nbButton","",1,"replyButton",3,"click"],["icon","message-square-outline",2,"font-size","26px"],["nbButton","","class","replyCount",3,"click",4,"ngIf"],["class","newPostContainer mat-elevation-z8",4,"ngIf"],[1,"text"],["style","",4,"ngFor","ngForOf"],["class","chunkContainer",4,"ngFor","ngForOf"],[1,"chunkContainer"],["class","textChunk",3,"innerHTML",4,"ngIf"],["class","emojiChunk","set","apple","size","24","style","display:inline-block;max-height: 24px;overflow: hidden;",3,"emoji",4,"ngIf"],[1,"textChunk",3,"innerHTML"],["set","apple","size","24",1,"emojiChunk",2,"display","inline-block","max-height","24px","overflow","hidden",3,"emoji"],["set","apple","size","64",1,"",3,"emoji"],["nbButton","",1,"replyCount",3,"click"],[1,"newPostContainer","mat-elevation-z8"],["matInput","","name","newPost","placeholder","Choose your words wisely",3,"ngModel","ngModelChange"],["emoji","grinning","set","apple","size","24",1,"emojiPickerTrigger",3,"nbPopover"],["emojiPickerRef",""],["mat-stroked-button","","color","primary",1,"defaultSettingsButton","postButton",3,"click"],["mat-stroked-button","","color","warning",1,"defaultSettingsButton","postButton","replyCancelButton",2,"float","left",3,"click"],["title","Pick your emoji\u2026","emoji","blush","darkMode","true",1,"emojiPicker",3,"emojiClick"],[1,"postContent",2,"margin-top","0px"]],template:function(t,e){1&t&&(r.Gc(0,j,2,0,"div",0),r.Gc(1,B,2,0,"div",1),r.Gc(2,I,2,1,"div",2),r.Gc(3,z,2,1,"div",3),r.Gc(4,T,2,1,"div",3),r.Gc(5,V,7,4,"div",4),r.Gc(6,G,2,0,"div",5),r.Yb(7,"div",6),r.Tb(8,"nb-icon",7),r.Xb()),2&t&&(r.pc("ngIf",e.isMyProfile&&e.postObj.timestamp>0),r.Fb(1),r.pc("ngIf",e.postObj.timestamp>0),r.Fb(1),r.pc("ngIf",null!=e.profile.alias&&e.profile.alias.length>0&&e.postObj.timestamp>0),r.Fb(1),r.pc("ngIf",null!=e.postObj.dTimestamp&&e.postObj.dTimestamp.length>0),r.Fb(1),r.pc("ngIf",null!=e.postObj.dTimestamp&&e.postObj.dTimestamp.length<0),r.Fb(1),r.pc("ngIf",e.postObj.timestamp>0),r.Fb(1),r.pc("ngIf",0==e.postObj.timestamp))},directives:[a.m,c.o,a.l,w.a,k.a,y.b,y.j,y.m,c.z,l.a,F.a],pipes:[S.b],styles:[".browse-files-button[_ngcontent-%COMP%]{border-radius:3px;padding:5px;color:purple}.importButton[_ngcontent-%COMP%]{color:purple!important}.captchaScreen[_ngcontent-%COMP%], .inviteScreen[_ngcontent-%COMP%], .joinScreen[_ngcontent-%COMP%]{background-color:#222b45;padding:20px;text-align:center}.captchaScreen[_ngcontent-%COMP%], .captchaScreen[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .chatScreen[_ngcontent-%COMP%], .inviteScreen[_ngcontent-%COMP%], .inviteScreen[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .joinScreen[_ngcontent-%COMP%], .joinScreen[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%}.poster[_ngcontent-%COMP%]{height:30vh;background-color:#111161}.verifyButton[_ngcontent-%COMP%]{margin-right:70px!important}.pp[_ngcontent-%COMP%]{border-radius:5px;overflow:hidden;z-index:1;float:left;margin-right:10px}.pp[_ngcontent-%COMP%], .pp[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:60px;height:60px}.name[_ngcontent-%COMP%]{white-space:nowrap}.alias[_ngcontent-%COMP%]{font-size:24px}.alias[_ngcontent-%COMP%], .fullname[_ngcontent-%COMP%]{white-space:nowrap;float:left}.fullname[_ngcontent-%COMP%]{margin-left:20px;opacity:.5}.about[_ngcontent-%COMP%]{clear:both;padding-top:30px;padding-right:20px}.details[_ngcontent-%COMP%]{overflow:hidden;background:#2d2b2b;color:#fff;padding-left:20px;font-size:20px;position:relative;top:-60px;padding-top:60px;z-index:0;padding-bottom:50px}.editButton[_ngcontent-%COMP%]{right:23px}.editButton[_ngcontent-%COMP%], .saveButton[_ngcontent-%COMP%]{position:absolute;font-size:20px;z-index:1;top:48px}.saveButton[_ngcontent-%COMP%]{right:143px}.discardButton[_ngcontent-%COMP%]{position:absolute;right:23px;font-size:20px;z-index:1;top:48px}.fundUs[_ngcontent-%COMP%]{text-align:center}.fundButton[_ngcontent-%COMP%]{background:#bfbf13!important;font-size:16px!important}.profilePrivacy[_ngcontent-%COMP%]{position:absolute;top:70px;font-size:19px;right:22px;background:#eed864;font-weight:700;border-radius:4px;color:rgba(39,105,247,.7803921568627451);font-family:Ubuntu;line-height:30px;padding:3px 10px;cursor:pointer}.profilePrivacy[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:24px;opacity:.7;position:relative;top:2px}@media only screen and (max-width:600px){.fullname[_ngcontent-%COMP%]{clear:both;margin-left:0}.editButton[_ngcontent-%COMP%]{top:52px}}input[_ngcontent-%COMP%]{caret-color:#fff}.pubKeyDisplay[_ngcontent-%COMP%]{position:absolute;left:99px;top:30vh;margin-top:55px;right:8px;line-height:7px;font-size:7px;font-family:MONOSPACE;word-break:break-all;overflow:hidden;color:rgba(211,166,65,.25098039215686274)!important;z-index:9999;top:-45px;cursor:pointer}@media only screen and (max-width:807px){.pubKeyDisplay[_ngcontent-%COMP%]{margin-top:0;position:fixed;left:10px;top:17.5vh;right:10px;line-height:10px;font-size:10px;font-family:MONOSPACE;word-break:break-all;overflow:hidden}}.senderIcon[_ngcontent-%COMP%]{top:-2px;position:relative;color:#d2d24b}.socialLink[_ngcontent-%COMP%]{cursor:pointer}.messageDisplayName[_ngcontent-%COMP%]{color:#d6d8dc!important;padding-bottom:5px!important}.messageSenderStarIcon[_ngcontent-%COMP%]{color:#256dff!important}.emojiChunk[_ngcontent-%COMP%]{max-height:22px;overflow:hidden;margin:0;position:relative;top:5px;padding:0 2px}.chunkContainer[_ngcontent-%COMP%], .emojiChunk[_ngcontent-%COMP%], .messagesInnerWrapper[_ngcontent-%COMP%], .textChunk[_ngcontent-%COMP%]{display:inline-block}.textChunk[_ngcontent-%COMP%]{white-space:nowrap;padding-left:2px;padding-right:2px;max-height:22px}.starButton[_ngcontent-%COMP%]{color:rgba(42,68,120,.5098039215686274);border:0 solid transparent!important}.starButton[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:2.5rem}.starButton[_ngcontent-%COMP%]:hover{color:rgba(37,109,255,.5607843137254902)}.starButton.active[_ngcontent-%COMP%]{color:#256dff;border:0 solid transparent!important;font-size:2.5rem}.starButton.active[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:2rem}.starButton.pending[_ngcontent-%COMP%]{color:#256dff;border:0 solid transparent!important;font-size:2.5rem}.pp[_ngcontent-%COMP%]{z-index:12}.details[_ngcontent-%COMP%]{z-index:11}.newPostContainer[_ngcontent-%COMP%], .postContainer[_ngcontent-%COMP%]{background:rgba(30,36,55,.788235294117647);margin-left:5vw;border-radius:10px;padding:40px;opacity:.9;font-family:Ubuntu;font-size:22px;color:#4680e9;width:90vw;text-align:right;margin-bottom:5vh;border:1px solid rgba(255,0,0,.25882352941176473)}.postContainer[_ngcontent-%COMP%]{text-align:left;border:1px solid rgba(45,99,236,.6509803921568628)}.postButton[_ngcontent-%COMP%]{color:rgba(198,196,137,.7803921568627451);font-family:Ubuntu;font-size:16px;margin-top:4vh;border:2px solid rgba(157,175,170,.7490196078431373)}.postDelete[_ngcontent-%COMP%]{float:right;color:rgba(255,0,0,.8117647058823529);margin-left:10px;font-size:20px;top:-1px;cursor:pointer}.postTime[_ngcontent-%COMP%]{color:rgba(199,40,249,.3803921568627451);font-size:14px;margin-bottom:10px;width:320px}.newPostContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-moz-placeholder{color:#ff0045}.newPostContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:-ms-input-placeholder{color:#ff0045}.newPostContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#ff0045}.mat-input-element[_ngcontent-%COMP%]{caret-color:#546184;text-align:left;border:1px solid transparent;border-radius:5px;padding:10px}.mat-input-element[_ngcontent-%COMP%]:focus{border:1px solid red}.mat-input-element[_ngcontent-%COMP%]::-moz-placeholder:focus{display:none}.mat-input-element[_ngcontent-%COMP%]:-ms-input-placeholder:focus{display:none}.mat-input-element[_ngcontent-%COMP%]::placeholder:focus{display:none}.details[_ngcontent-%COMP%]{color:#6d95ce}.postAlias[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;font-weight:900!important;color:rgba(166,6,6,.7803921568627451);letter-spacing:-.1rem;font-family:Helvetica}.postContent[_ngcontent-%COMP%]{width:100%;margin-top:40px}.replyButton[_ngcontent-%COMP%]{position:relative;top:22px;left:-10px;padding:10px;background:transparent;border:0;color:red}.newPostContainer[_ngcontent-%COMP%]{background:rgba(30,36,55,.788235294117647);border-radius:10px;padding:40px;opacity:.9;font-family:Ubuntu;font-size:22px;color:#4680e9;text-align:right;width:auto;margin:-4px 0 0 9px;border:1px solid rgba(255,0,0,.25882352941176473)}.emojiPickerTrigger[_ngcontent-%COMP%]{opacity:1;z-index:9;padding:8px;margin-right:10px;cursor:pointer;right:0;position:relative;top:3px}.emojiPicker[_ngcontent-%COMP%]{z-index:222222!important;position:relative;right:70px;background:transparent}.replyCancelButton[_ngcontent-%COMP%]{color:red!important;float:left;color:red;border:2px solid red;opacity:.5}.replyCancelButton[_ngcontent-%COMP%]:hover{opacity:1}.replyCount[_ngcontent-%COMP%]{background-color:rgba(113,125,211,.2);border:0;top:17px;font-size:16px;color:#4982e8;border-radius:30px;padding:6px;line-height:16px}.lockClosed[_ngcontent-%COMP%], .replyCount[_ngcontent-%COMP%]{position:relative}.lockClosed[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{position:absolute;right:-5px;top:-11px;color:rgba(45,100,237,.10980392156862745);font-size:28px}"],changeDetection:0}),t})();function W(t,e){if(1&t&&(r.Yb(0,"div",4),r.Tb(1,"app-social-profile-post",5),r.Xb()),2&t){const t=r.jc().$implicit,e=r.jc();r.Fb(1),r.pc("postObj",t)("isMyProfile",e.isMyProfile)}}function Z(t,e){if(1&t&&(r.Yb(0,"div",2),r.Gc(1,W,2,2,"div",3),r.Xb()),2&t){const t=e.$implicit;r.Fb(1),r.pc("ngIf",null!=t.content)}}function U(t,e){if(1&t&&(r.Yb(0,"div",8),r.Tb(1,"app-social-profile-post",9),r.Xb()),2&t){const t=r.jc(),e=t.index,n=t.$implicit,o=r.jc();r.Fb(1),r.Ib("postContainer mat-elevation-z8 post level-",e,""),r.pc("postObj",n)("isMyProfile",o.isMyProfile)}}function $(t,e){if(1&t&&(r.Yb(0,"div",8),r.Tb(1,"app-social-profile-post",10),r.Xb()),2&t){const t=r.jc().$implicit,e=r.jc();r.Fb(1),r.pc("postObj",t)("isMyProfile",e.isMyProfile)}}function Q(t,e){if(1&t&&(r.Yb(0,"div",8),r.Tb(1,"app-social-profile-post",11),r.Xb()),2&t){const t=r.jc().$implicit,e=r.jc();r.Fb(1),r.pc("postObj",t)("isMyProfile",e.isMyProfile)}}function J(t,e){if(1&t&&(r.Yb(0,"div",6),r.Gc(1,U,2,5,"div",7),r.Gc(2,$,2,2,"div",7),r.Gc(3,Q,2,2,"div",7),r.Xb()),2&t){const t=e.$implicit,n=r.jc();r.Fb(1),r.pc("ngIf",n.combinedTimeline.length>1),r.Fb(1),r.pc("ngIf",1==n.combinedTimeline.length&&null==t.replyTo),r.Fb(1),r.pc("ngIf",1==n.combinedTimeline.length&&null!=t.replyTo)}}let tt=(()=>{class t{constructor(t,e,n,o){this._sanitizer=t,this.dialog=e,this.cd=n,this.q=o,this.pubKey="NoProfileSelected",this.postList=[],this.combinedTimeline=[],this.DEVMODE=O.dev,this.replyTree=[],this.isMyProfile=!1}ngOnInit(){return Object(i.a)(this,void 0,void 0,(function*(){void 0!==this.combinedTimeline[0].replyTo&&(this.replyTree=yield this.q.os.social.timeline.agent.resolveReplyTreeRec(this.combinedTimeline[0]),console.log(this.replyTree))}))}ngOnChanges(){return Object(i.a)(this,void 0,void 0,(function*(){}))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(M.b),r.Sb(c.l),r.Sb(r.h),r.Sb(s.a))},t.\u0275cmp=r.Mb({type:t,selectors:[["social-timeline-post-combined-timeline"]],inputs:{combinedTimeline:"combinedTimeline",isMyProfile:"isMyProfile"},features:[r.Db],decls:2,vars:2,consts:[["class","replyLoop",4,"ngFor","ngForOf"],["class","postOuterWrapper",4,"ngFor","ngForOf"],[1,"replyLoop"],["class","replyWrapper",4,"ngIf"],[1,"replyWrapper"],[1,"postContainer","mat-elevation-z8","reply",3,"postObj","isMyProfile"],[1,"postOuterWrapper"],["class","postWrapper",4,"ngIf"],[1,"postWrapper"],[3,"postObj","isMyProfile"],[1,"postContainer","mat-elevation-z8","post","singleLevel",3,"postObj","isMyProfile"],[1,"postContainer","mat-elevation-z8","post","singleLevel","replyPost",3,"postObj","isMyProfile"]],template:function(t,e){1&t&&(r.Gc(0,Z,2,1,"div",0),r.Gc(1,J,4,3,"div",1)),2&t&&(r.pc("ngForOf",e.replyTree),r.Fb(1),r.pc("ngForOf",e.combinedTimeline))},directives:[a.l,a.m,H],styles:[".browse-files-button[_ngcontent-%COMP%]{border-radius:3px;padding:5px;color:purple}.importButton[_ngcontent-%COMP%]{color:purple!important}.captchaScreen[_ngcontent-%COMP%], .inviteScreen[_ngcontent-%COMP%], .joinScreen[_ngcontent-%COMP%]{background-color:#222b45;padding:20px;text-align:center}.captchaScreen[_ngcontent-%COMP%], .captchaScreen[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .chatScreen[_ngcontent-%COMP%], .inviteScreen[_ngcontent-%COMP%], .inviteScreen[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .joinScreen[_ngcontent-%COMP%], .joinScreen[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%}.poster[_ngcontent-%COMP%]{height:30vh;background-color:#111161}.verifyButton[_ngcontent-%COMP%]{margin-right:70px!important}.pp[_ngcontent-%COMP%]{border-radius:5px;overflow:hidden;position:relative;left:30px;top:-30px;z-index:1}.pp[_ngcontent-%COMP%], .pp[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:60px;height:60px}.name[_ngcontent-%COMP%]{white-space:nowrap}.alias[_ngcontent-%COMP%]{font-size:24px}.alias[_ngcontent-%COMP%], .fullname[_ngcontent-%COMP%]{white-space:nowrap;float:left}.fullname[_ngcontent-%COMP%]{margin-left:20px;opacity:.5}.about[_ngcontent-%COMP%]{clear:both;padding-top:30px;padding-right:20px}.details[_ngcontent-%COMP%]{overflow:hidden;background:#2d2b2b;color:#fff;padding-left:20px;font-size:20px;padding-top:60px;z-index:0;padding-bottom:50px;margin-top:-60px;margin-bottom:42px;color:#6d95ce;z-index:11;background:#151b2e;background:linear-gradient(90deg,#151b2e,rgba(16,22,41,.5882352941176471))}.editButton[_ngcontent-%COMP%]{font-size:20px;z-index:1;float:right;margin-right:20px;margin-top:-15px}.discardButton[_ngcontent-%COMP%], .saveButton[_ngcontent-%COMP%]{font-size:20px;z-index:1;float:right;margin-right:23px}.fundButton[_ngcontent-%COMP%]{background:#bfbf13!important;font-size:16px!important}.profilePrivacy[_ngcontent-%COMP%]{position:absolute;font-size:19px;right:22px;background:#eed864;font-weight:700;border-radius:4px;color:rgba(39,105,247,.7803921568627451);font-family:Ubuntu;line-height:30px;padding:3px 10px;cursor:pointer;top:20px}.profilePrivacy[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:24px;opacity:.7;position:relative;top:2px}@media only screen and (max-width:600px){.fullname[_ngcontent-%COMP%]{clear:both;margin-left:0}}input[_ngcontent-%COMP%]{caret-color:#fff}.pubKeyDisplay[_ngcontent-%COMP%]{left:99px;right:8px;line-height:7px;font-size:7px;font-family:MONOSPACE;word-break:break-all;overflow:hidden;color:rgba(211,166,65,.25098039215686274)!important;z-index:9999;top:-45px;cursor:pointer;margin-top:-53px;margin-bottom:23px;margin-left:78px}@media only screen and (max-width:807px){.pubKeyDisplay[_ngcontent-%COMP%]{max-height:20px;text-overflow:ellipsis;line-height:10px;font-size:10px;font-family:MONOSPACE;word-break:break-all;overflow:hidden}.editButton[_ngcontent-%COMP%]{margin-top:-9px}}.starButton[_ngcontent-%COMP%]{color:rgba(42,68,120,.5098039215686274);border:0 solid transparent!important}.starButton[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:2.5rem}.starButton[_ngcontent-%COMP%]:hover{color:rgba(37,109,255,.5607843137254902)}.starButton.active[_ngcontent-%COMP%]{color:#256dff;border:0 solid transparent!important;font-size:2.5rem}.starButton.active[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:2rem}.starButton.pending[_ngcontent-%COMP%]{color:#256dff;border:0 solid transparent!important;font-size:2.5rem}.search[_ngcontent-%COMP%]{z-index:2;right:0;left:0;padding:20px;height:95px;bottom:28px;position:absolute;top:0}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:Ubuntu;position:absolute;letter-spacing:1px;color:rgba(241,237,205,.8196078431372549);padding:10px 10px 10px 26px;font-size:16px;left:5%;width:90%;font-weight:500!important}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:1px solid red}.search[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:1.75rem}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:rgba(41,104,245,.8313725490196079)}.pp[_ngcontent-%COMP%]{z-index:12}.fundUs[_ngcontent-%COMP%]{z-index:2;width:100%;margin-bottom:120px;text-align:center;margin-top:38px}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;height:40px;width:40px;border:0;color:#7b9cc3;padding-right:8px;width:50px;position:absolute;top:19px;right:5%}.search[_ngcontent-%COMP%]   .searchButton[_ngcontent-%COMP%]:focus, .search[_ngcontent-%COMP%]   .searchButtonWrapper[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]   .searchButtonWrapper[_ngcontent-%COMP%]:focus{outline:none!important;border:0!important;box-shadow:none!important}.results[_ngcontent-%COMP%]{background:linear-gradient(90deg,#151b2e,rgba(16,22,41,.59));font-family:Ubuntu;overflow:hidden;overflow-y:auto;position:absolute;left:0;right:0;bottom:27px;top:0}.resultCardWrapper[_ngcontent-%COMP%]{padding:20px 4% 20px 5%}.resultCardWrapper[_ngcontent-%COMP%]:first-child{padding-top:60px;padding-bottom:20px}.resultCardWrapper[_ngcontent-%COMP%]:last-child{padding-bottom:120px}.searchResultAlias[_ngcontent-%COMP%]{font-size:18px}.searchResultPp[_ngcontent-%COMP%], .searchResultPpImg[_ngcontent-%COMP%]{height:100px}.searchResultColumn[_ngcontent-%COMP%]{color:#4f84e2;padding:10px 10px 10px 20px}.searchResultConnection.topCorner[_ngcontent-%COMP%]{display:none;color:#4f84e2;margin-top:7px}.searchResultAboutWrapper[_ngcontent-%COMP%]{width:100%}.resultCard[_ngcontent-%COMP%]{border-radius:5px;flex-direction:row;box-sizing:border-box;display:flex;background:linear-gradient(90deg,#151b2e,rgba(16,22,41,.5882352941176471));background:linear-gradient(90deg,#192752,rgba(16,22,41,.5882352941176471));overflow:hidden;cursor:pointer;border:1px solid transparent}.resultCard[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#151b2e,rgba(16,22,41,.5882352941176471));overflow:hidden;border:1px solid red}.searchResultFullName[_ngcontent-%COMP%]{color:rgba(79,132,226,.5411764705882353)}@media only screen and (max-width:816px){.searchResultColumn[_ngcontent-%COMP%]{padding-left:10px}.searchResultConnection.searchResultColumn[_ngcontent-%COMP%]{display:none}.searchResultConnection.topCorner[_ngcontent-%COMP%]{display:block}.resultCard[_ngcontent-%COMP%]{flex-flow:row wrap}}.postButton[_ngcontent-%COMP%]{color:rgba(198,196,137,.7803921568627451);font-family:Ubuntu;font-size:16px;margin-top:4vh;border:2px solid rgba(157,175,170,.7490196078431373)}.postDelete[_ngcontent-%COMP%]{float:right;color:rgba(255,0,0,.8117647058823529);margin-left:10px;font-size:20px;position:relative;top:-1px;cursor:pointer}.postTime[_ngcontent-%COMP%]{float:right;color:#452781}.newPostContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-moz-placeholder{color:#ff0045}.newPostContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:-ms-input-placeholder{color:#ff0045}.newPostContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#ff0045}.mat-input-element[_ngcontent-%COMP%]{caret-color:#546184;text-align:left;border:1px solid transparent;border-radius:5px;padding:10px}.mat-input-element[_ngcontent-%COMP%]:focus{border:1px solid red}.mat-input-element[_ngcontent-%COMP%]::-moz-placeholder:focus{display:none}.mat-input-element[_ngcontent-%COMP%]:-ms-input-placeholder:focus{display:none}.mat-input-element[_ngcontent-%COMP%]::placeholder:focus{display:none}.emojiPickerTrigger[_ngcontent-%COMP%]{opacity:1;z-index:9;padding:8px;margin-right:10px;cursor:pointer;right:0;position:relative;top:3px}.emojiPicker[_ngcontent-%COMP%]{z-index:222222!important;position:relative;right:70px;background:transparent}  nb-popover{background:transparent!important}@media only screen and (max-width:616px){.newPostContainer[_ngcontent-%COMP%], .postContainer[_ngcontent-%COMP%]{margin-left:0;margin-right:0!important;margin-top:0;border:0!important;margin-bottom:15px;border-radius:0;border-top:1px solid #40389e!important;border-bottom:1px solid #423193!important;width:100vw}.postContainer[_ngcontent-%COMP%]:last-child{margin-bottom:40px}}.emojiPicker[_ngcontent-%COMP%]{right:60px}@media only screen and (min-width:420px) and (max-width:480px){.emojiPicker[_ngcontent-%COMP%]{right:-40px}}@media only screen and (min-width:480px) and (max-width:900px){.emojiPicker[_ngcontent-%COMP%]{right:0}}.newPostContainer[_ngcontent-%COMP%], .postContainer[_ngcontent-%COMP%]{background:rgba(30,36,55,.788235294117647);margin-left:5vw;border-radius:10px;padding:40px;opacity:.9;font-family:Ubuntu;font-size:22px;color:#4680e9;margin-right:5vw;text-align:right;margin-bottom:5vh;border:1px solid rgba(255,0,0,.25882352941176473);display:block}.postContainer[_ngcontent-%COMP%]{text-align:left;border:1px solid rgba(45,99,236,.6509803921568628);border-radius:0;margin-top:-46px}.postContainer.level-0[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;margin-top:0}.postOuterWrapper[_ngcontent-%COMP%]:last-child   .postContainer[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px;margin-top:-56px}.postContainer.reply[_ngcontent-%COMP%]{border-left:8px solid;border-right:8px solid;border-top:1px solid;position:relative;margin:-17px 6vw 0;top:22px}.postContainer.singleLevel[_ngcontent-%COMP%]{margin-top:40px!important;margin-bottom:20px;border-radius:10px!important}.postContainer.singleLevel.replyPost[_ngcontent-%COMP%]{margin-top:0!important;border-radius:10px!important}.replyLoop[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .postContainer[_ngcontent-%COMP%]{border-radius:0;border-bottom-left-radius:10px;border-bottom-right-radius:10px}.replyLoop[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%] > .postContainer[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;margin-top:30px}.replyLoop[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%] > .postContainer[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px}.combinedTimeline[_ngcontent-%COMP%]:nth-child(2){margin-top:120px}.postOuterWrapper[_ngcontent-%COMP%]:last-child   .postContainer[_ngcontent-%COMP%]{margin-top:-44px}.replyLoop[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .lockClosed[_ngcontent-%COMP%]{display:none}.replyLoop[_ngcontent-%COMP%]:first-child   .reply[_ngcontent-%COMP%]   .lockClosed[_ngcontent-%COMP%]{display:block}"]}),t})();var et=n("XiUz");const nt=["qrPop"],ot=["createPop"],it=["qrCode"];function rt(t,e){if(1&t){const t=r.Zb();r.Yb(0,"nb-card"),r.Yb(1,"nb-card-header"),r.Ic(2,"Verify Peer"),r.Xb(),r.Yb(3,"nb-card-body",16),r.Yb(4,"div",17),r.Yb(5,"zxing-scanner",18),r.fc("deviceChange",(function(e){return r.xc(t),r.jc().currentDevice=e}))("scanSuccess",(function(e){return r.xc(t),r.jc().qrSuccessHandler(e)}))("permissionResponse",(function(e){return r.xc(t),r.jc().onHasPermission(e)}))("camerasFound",(function(e){return r.xc(t),r.jc().onCamerasFound(e)}))("torchCompatible",(function(e){return r.xc(t),r.jc().onTorchCompatible(e)})),r.Xb(),r.Xb(),r.Xb(),r.Yb(6,"nb-card-footer"),r.Yb(7,"button",19),r.fc("click",(function(){return r.xc(t),r.jc().closeQR()})),r.Ic(8,"Cancel"),r.Xb(),r.Xb(),r.Xb()}if(2&t){const t=r.jc();r.Fb(5),r.pc("torch",t.torchEnabled)("device",t.currentDevice)("formats",t.formatsEnabled)("tryHarder",t.tryHarder)}}function ct(t,e){if(1&t){const t=r.Zb();r.Yb(0,"nb-card"),r.Yb(1,"nb-card-header"),r.Ic(2,"Verify Peer"),r.Xb(),r.Yb(3,"nb-card-body",20),r.Yb(4,"div"),r.Yb(5,"div",21),r.Tb(6,"img",22),r.Xb(),r.Xb(),r.Xb(),r.Yb(7,"nb-card-footer"),r.Yb(8,"button",19),r.fc("click",(function(){return r.xc(t),r.jc().closePopup()})),r.Ic(9,"Close"),r.Xb(),r.Xb(),r.Xb()}if(2&t){const t=r.jc();r.Fb(6),r.pc("src",t.qrCodeURLSafe,r.zc)}}function st(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",26),r.fc("click",(function(){return r.xc(t),r.jc(2).togglePrivacy()})),r.Tb(1,"nb-icon",27),r.Ic(2," Private"),r.Xb()}}function at(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",28),r.fc("click",(function(){return r.xc(t),r.jc(2).togglePrivacy()})),r.Tb(1,"nb-icon",29),r.Ic(2," Public"),r.Xb()}}function lt(t,e){if(1&t&&(r.Yb(0,"div",23),r.Gc(1,st,3,0,"div",24),r.Gc(2,at,3,0,"div",25),r.Xb()),2&t){const t=r.jc();r.Fb(1),r.pc("ngIf",t.private),r.Fb(1),r.pc("ngIf",!t.private)}}function pt(t,e){1&t&&(r.Yb(0,"div",30),r.Tb(1,"img",31),r.Xb())}function dt(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",45),r.fc("click",(function(){return r.xc(t),r.jc(2).showVerificationQR()})),r.Ic(1),r.Xb()}if(2&t){const t=r.jc(2);r.Ib("pubKeyDisplay ",t.isMyProfile,""),r.Fb(1),r.Jc(t.pubKey)}}function gt(t,e){if(1&t){const t=r.Zb();r.Yb(0,"button",46),r.fc("click",(function(){return r.xc(t),r.jc(2).edit()})),r.Ic(1,"Edit"),r.Xb()}}function ut(t,e){if(1&t){const t=r.Zb();r.Yb(0,"button",47),r.fc("click",(function(){return r.xc(t),r.jc(2).verify()})),r.Tb(1,"nb-icon",48),r.Xb()}}function ht(t,e){1&t&&(r.Yb(0,"button",49),r.Tb(1,"nb-icon",48),r.Xb())}function bt(t,e){if(1&t){const t=r.Zb();r.Yb(0,"button",50),r.fc("click",(function(){return r.xc(t),r.jc(2).setConnection(!0)})),r.Tb(1,"nb-icon",51),r.Xb()}}function ft(t,e){if(1&t){const t=r.Zb();r.Yb(0,"button",52),r.fc("click",(function(){r.xc(t);const e=r.jc(2);return e.openMessages(e.pubKey)})),r.Tb(1,"nb-icon",53),r.Xb()}}function mt(t,e){if(1&t){const t=r.Zb();r.Yb(0,"button",54),r.fc("click",(function(){return r.xc(t),r.jc(2).setConnection(!1)})),r.Tb(1,"nb-icon",51),r.Xb()}}function Ct(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",55),r.fc("click",(function(){return r.xc(t),r.jc(2).showVerificationQR()})),r.ic(),r.Yb(1,"svg",56),r.Yb(2,"g"),r.Tb(3,"rect",57),r.Xb(),r.Tb(4,"path",58),r.Xb(),r.Xb()}}function xt(t,e){if(1&t&&(r.Yb(0,"div",32),r.Gc(1,dt,2,4,"div",33),r.Gc(2,gt,2,0,"button",34),r.Gc(3,ut,2,0,"button",35),r.Gc(4,ht,2,0,"button",36),r.Gc(5,bt,2,0,"button",37),r.Gc(6,ft,2,0,"button",38),r.Gc(7,mt,2,0,"button",39),r.Yb(8,"div",40),r.Yb(9,"div",41),r.Ic(10),r.Xb(),r.Yb(11,"div",42),r.Ic(12),r.Xb(),r.Xb(),r.Yb(13,"div",43),r.Ic(14),r.Xb(),r.Gc(15,Ct,5,0,"div",44),r.Xb()),2&t){const t=r.jc();r.Fb(1),r.pc("ngIf",!t.searchResultsActive),r.Fb(1),r.pc("ngIf",t.isMyProfile),r.Fb(1),r.pc("ngIf",!t.isMyProfile&&!t.isVerified),r.Fb(1),r.pc("ngIf",!t.isMyProfile&&t.isVerified),r.Fb(1),r.pc("ngIf",!t.isMyProfile&&!t.isConnection&&!t.isRequestedConnection),r.Fb(1),r.pc("ngIf",!t.isMyProfile&&t.isConnection),r.Fb(1),r.pc("ngIf",!t.isMyProfile&&t.isRequestedConnection),r.Fb(3),r.Kc(" ",t.alias," "),r.Fb(2),r.Kc(" ",t.fullName," "),r.Fb(2),r.Kc("\n",t.about,"\n"),r.Fb(1),r.pc("ngIf",!t.searchResultsActive&&t.isMyProfile)}}function Pt(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",66),r.fc("click",(function(){return r.xc(t),r.jc(2).showVerificationQR()})),r.Ic(1),r.Xb()}if(2&t){const t=r.jc(2);r.Fb(1),r.Jc(t.pubKey)}}function vt(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",32),r.Gc(1,Pt,2,1,"div",59),r.Yb(2,"div",40),r.Yb(3,"div",41),r.Yb(4,"input",60),r.fc("ngModelChange",(function(e){return r.xc(t),r.jc().newAlias=e})),r.Xb(),r.Xb(),r.Yb(5,"div",42),r.Yb(6,"input",61),r.fc("ngModelChange",(function(e){return r.xc(t),r.jc().newFullName=e})),r.Xb(),r.Xb(),r.Xb(),r.Yb(7,"div",62),r.Yb(8,"textarea",63),r.fc("ngModelChange",(function(e){return r.xc(t),r.jc().newAbout=e})),r.Xb(),r.Xb(),r.Yb(9,"button",64),r.fc("click",(function(){return r.xc(t),r.jc().save()})),r.Ic(10,"Save"),r.Xb(),r.Yb(11,"button",65),r.fc("click",(function(){return r.xc(t),r.jc().edit(!1)})),r.Ic(12,"Discard"),r.Xb(),r.Xb()}if(2&t){const t=r.jc();r.Fb(1),r.pc("ngIf",!t.searchResultsActive),r.Fb(3),r.pc("ngModel",t.newAlias),r.Fb(2),r.pc("ngModel",t.newFullName),r.Fb(2),r.pc("ngModel",t.newAbout)}}function Ot(t,e){if(1&t){const t=r.Zb();r.Yb(0,"emoji-mart",72),r.fc("emojiClick",(function(e){return r.xc(t),r.jc(2).addEmoji(e)})),r.Xb()}}function Mt(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",67),r.Yb(1,"textarea",68),r.fc("ngModelChange",(function(e){return r.xc(t),r.jc().newPost=e})),r.Xb(),r.Tb(2,"ngx-emoji",69),r.Gc(3,Ot,1,0,"ng-template",null,70,r.Hc),r.Yb(5,"button",71),r.fc("click",(function(){return r.xc(t),r.jc().post()})),r.Ic(6,"Post"),r.Xb(),r.Xb()}if(2&t){const t=r.vc(4),e=r.jc();r.Fb(1),r.pc("ngModel",e.newPost),r.Fb(1),r.pc("nbPopover",t)}}function yt(t,e){if(1&t&&r.Tb(0,"social-timeline-post-combined-timeline",73),2&t){const t=e.$implicit,n=r.jc();r.pc("combinedTimeline",t)("isMyProfile",n.isMyProfile)}}function _t(t,e){1&t&&(r.Yb(0,"button",76),r.Ic(1," Sync More "),r.Xb())}function kt(t,e){1&t&&(r.Yb(0,"button",76),r.Ic(1," Sync "),r.Xb())}function wt(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",74),r.fc("click",(function(){r.xc(t);const e=r.jc();return e.syncMore(e.pubKey)})),r.Gc(1,_t,2,0,"button",75),r.Gc(2,kt,2,0,"button",75),r.Xb()}if(2&t){const t=r.jc();r.Fb(1),r.pc("ngIf",t.groupedTimeline.length>0),r.Fb(1),r.pc("ngIf",0===t.groupedTimeline.length)}}function Ft(t,e){1&t&&r.Tb(0,"nb-icon",93)}function St(t,e){if(1&t){const t=r.Zb();r.Yb(0,"nb-icon",94),r.fc("click",(function(){r.xc(t);const e=r.jc().$implicit;return r.jc(2).openMessages(e.key.pubKey)})),r.Xb()}}function jt(t,e){1&t&&r.Tb(0,"nb-icon",51)}function Bt(t,e){1&t&&r.Tb(0,"nb-icon",93)}function It(t,e){if(1&t){const t=r.Zb();r.Yb(0,"nb-icon",94),r.fc("click",(function(){r.xc(t);const e=r.jc().$implicit;return r.jc(2).openMessages(e.key.pubKey)})),r.Xb()}}function zt(t,e){1&t&&r.Tb(0,"nb-icon",51)}const Tt=function(t){return[t]};function qt(t,e){if(1&t&&(r.Yb(0,"div",79),r.Yb(1,"div",80),r.Yb(2,"div",81),r.Tb(3,"img",82),r.Xb(),r.Yb(4,"div",83),r.Yb(5,"span",84),r.Ic(6),r.Xb(),r.Tb(7,"br"),r.Yb(8,"span",85),r.Ic(9),r.Xb(),r.Xb(),r.Yb(10,"div",86),r.Gc(11,Ft,1,0,"nb-icon",87),r.Gc(12,St,1,0,"nb-icon",88),r.Gc(13,jt,1,0,"nb-icon",89),r.Xb(),r.Yb(14,"div",90),r.Yb(15,"div",91),r.Ic(16),r.Xb(),r.Xb(),r.Yb(17,"div",92),r.Gc(18,Bt,1,0,"nb-icon",87),r.Gc(19,It,1,0,"nb-icon",88),r.Gc(20,zt,1,0,"nb-icon",89),r.Xb(),r.Xb(),r.Xb()),2&t){const t=e.$implicit;r.Fb(1),r.pc("routerLink",r.sc(10,Tt,"/social/profile/"+t.key.pubKey)),r.Fb(5),r.Kc("",t.alias," "),r.Fb(3),r.Kc("",t.fullName," "),r.Fb(2),r.pc("ngIf",!t.isFavorite&&!t.isRequestedFavorite),r.Fb(1),r.pc("ngIf",t.isFavorite),r.Fb(1),r.pc("ngIf",t.isRequestedFavorite),r.Fb(3),r.Kc(" ",t.about," "),r.Fb(2),r.pc("ngIf",!t.isFavorite&&!t.isRequestedFavorite),r.Fb(1),r.pc("ngIf",t.isFavorite),r.Fb(1),r.pc("ngIf",t.isRequestedFavorite)}}function Nt(t,e){if(1&t&&(r.Yb(0,"div",77),r.Gc(1,qt,21,12,"div",78),r.Xb()),2&t){const t=r.jc();r.Fb(1),r.pc("ngForOf",t.searchResults)}}function Rt(t,e){1&t&&r.Tb(0,"nb-icon",95)}function Yt(t,e){if(1&t&&r.Ic(0),2&t){const t=r.jc();r.Jc(t.buttonTitle)}}let Xt=(()=>{class t{constructor(t,e,n,o,i,r,c){this.route=t,this.router=e,this.ngZone=n,this._sanitizer=o,this.dialog=i,this.cd=r,this.q=c,this.pubKey="NoProfileSelected",this.newPost="",this.timeline=[],this.DEVMODE=O.dev,this.buttonTitle="",this.status="",this.inputFocus=!1,this.inputHover=!1,this.searchPhrase="",this.searchResults=[],this.searchResultsActive=!1,this.noProfileSelected="NoProfileSelected",this.syncSub={},this.synced=[],this.replyTree={},this.groupedTimeline=[],this.syncStatus=!1,this.alias="Anonymous",this.fullName="Anonymous",this.about="The Universe is under no obligation to make sense to you. I'd rather not say anything. do@not-find-me.com",this.editDetails=!1,this.isMyProfile=!1,this.private=!0,this.isConnection=!1,this.isRequestedConnection=!1,this.requestLock=!1,this.currentDevice=null,this.formatsEnabled=[v.BarcodeFormat.QR_CODE],this.torchEnabled=!1,this.torchAvailable$=new P.a(!1),this.tryHarder=!1,this.isVerified=!1,this.verifyQrCode="",this.popupRef=[],this.isOwner=!1}post(){return Object(i.a)(this,void 0,void 0,(function*(){if(null==typeof this.pubKey||"NoProfileSelected"==this.pubKey)throw"no key set";let t=yield this.q.os.social.profile.get(this.pubKey);if(console.log(t),void 0===t.alias)throw alert("Please set your Alias first!"),"no name set";let e={content:this.newPost,socialPubKey:this.pubKey};yield this.q.os.social.timeline.post.new(e),this.newPost="",setTimeout(()=>{this.syncTimeline()},2e3)}))}addEmoji(t){this.newPost+=" "+t.emoji.colons+" "}showStream(){this.ngZone.run(()=>this.router.navigate(["/social/stream/network"]))}parseSearchBar(){this.searchPhrase.length>0?this.search():(this.searchResultsActive=!1,this.cd.detectChanges())}search(){return Object(i.a)(this,void 0,void 0,(function*(){this.searchResults=yield this.q.os.social.profile.search(this.searchPhrase),this.searchResultsActive=this.searchResults.length>0,this.cd.detectChanges()}))}setStatus(t){this.status!==t&&(this.status=t)}getInputStatus(){return""}loadProfile(){return Object(i.a)(this,void 0,void 0,(function*(){console.log("Profile: Initializing..."),this.isConnection=this.q.os.social.profile.isFavorite(this.pubKey),this.isRequestedConnection=this.q.os.social.profile.isRequestedFavorite(this.pubKey),this.isVerified=this.q.os.social.profile.isVerified(this.pubKey),console.log("Profile: Bootstrapping Profile...");try{let t=yield this.q.os.social.profile.get(this.pubKey);this.isMyProfile=this.q.os.social.profile.isMyProfileId(this.pubKey),console.log("Social: Is my profile:",this.isMyProfile),void 0!==t.alias&&(this.alias=t.alias),void 0!==t.fullName&&(this.fullName=t.fullName),void 0!==t.about&&(this.about=t.about),void 0!==t.private&&(this.private=t.private)}catch(t){console.log(t)}}))}syncMore(t){let e=this.q.os.social.timeline.agent.getLimit(t);e+=5,this.q.os.social.timeline.agent.sync(t,{limit:e})}updateListen(){void 0===this.syncSub[this.pubKey]&&(this.syncSub[this.pubKey]=this.q.os.social.timeline.agent.onSync(this.pubKey).subscribe(t=>Object(i.a)(this,void 0,void 0,(function*(){this.syncStatus=!1,void 0!==t&&void 0!==t.groupedTimeline?(this.groupedTimeline=[],this.groupedTimeline=t.groupedTimeline,this.q.os.ui.showSnack("Timeline Synced!","Yeah",{duration:500}),this.syncStatus=!0,this.cd.detectChanges(),setTimeout(()=>{this.cd.detectChanges()},2e3),setTimeout(()=>{this.cd.detectChanges()},5e3),setTimeout(()=>{this.syncStatus=!0,this.cd.detectChanges()},1e4)):(this.q.os.ui.showSnack("Sync Failed!","Oh No",{duration:1e3}),this.syncStatus=!0)}))))}ngOnInit(){this.ngOnChanges()}ngOnChanges(){return Object(i.a)(this,void 0,void 0,(function*(){if(void 0!==this.pubKey&&"NoProfileSelected"!=this.pubKey&&this.pubKey.length>0)try{yield this.loadProfile(),this.cd.detectChanges()}catch(t){}else{let t=yield this.q.os.social.profile.getMyProfile();this.pubKey=JSON.parse(JSON.stringify(t.key.pubKey)),yield this.loadProfile(),this.cd.detectChanges()}void 0===this.paramSub&&(this.paramSub=this.route.params.subscribe(t=>Object(i.a)(this,void 0,void 0,(function*(){console.log(t),void 0!==t.pubKey&&(this.pubKey=t.pubKey),this.q.os.ui.showSnack("Syncing Timeline...","Please Wait"),this.ngOnChanges()})))),setTimeout(()=>{this.syncTimeline()},3e3)}))}syncTimeline(){return Object(i.a)(this,void 0,void 0,(function*(){this.unsubscribeAll(),this.updateListen();try{yield this.q.os.social.timeline.agent.sync(this.pubKey)}catch(t){}}))}unsubscribeAll(){let t=Object.keys(this.syncSub);for(let n of t)try{this.syncSub[n].unsubscribe(),delete this.syncSub[this.pubKey]}catch(e){}}ngOnDestroy(){this.paramSub.unsubscribe(),this.unsubscribeAll()}edit(t=!0){t&&(this.newAlias=this.alias,this.newFullName=this.fullName,this.newAbout=this.about),this.editDetails=t}save(){return Object(i.a)(this,void 0,void 0,(function*(){let t=[];try{t=yield this.q.os.social.timeline.getReferenceTree(this.pubKey)}catch(n){}let e={private:this.private,alias:this.newAlias,fullName:this.newFullName,about:this.newAbout};t.length>0&&(e.timeline=t),this.q.os.social.profile.set(this.pubKey,e),this.q.os.social.profile.select(this.pubKey),this.edit(!1),this.ngOnChanges()}))}setConnection(t){return Object(i.a)(this,void 0,void 0,(function*(){if(this.requestLock)return!1;if(this.requestLock=!0,t){let e=yield this.q.os.social.profile.getMyProfileId();if(console.log("qSocial: trying to add New Favorite Request...",this.pubKey),!this.q.os.social.profile.isRequestedFavorite(this.pubKey)){let n=yield this.q.os.channel.create("qprivatedch-"+e+"-"+this.pubKey,"",!0);this.q.os.social.profile.addFavoriteRequest(this.pubKey,n),this.isRequestedConnection=t,this.requestLock=!1}}else{let e=this.q.os.channel.find(this.pubKey);this.q.os.channel.remove(e),this.q.os.social.profile.removeFavorite(this.pubKey),this.q.os.social.profile.removeFavoriteRequest(this.pubKey),this.isRequestedConnection=t,this.isConnection=t,this.requestLock=!1}}))}togglePrivacy(){return Object(i.a)(this,void 0,void 0,(function*(){if(!this.isMyProfile)return!1;yield this.q.os.social.profile.togglePrivacy(this.pubKey),this.private=!this.private}))}openProfile(t){return Object(i.a)(this,void 0,void 0,(function*(){this.pubKey=t,this.q.os.social.profile.select(this.pubKey),this.searchResultsActive=!1}))}openMessages(t){return Object(i.a)(this,void 0,void 0,(function*(){let e=this.q.os.channel.find(t);this.q.os.channel.select(e),this.ngZone.run(()=>this.router.navigate(["/messages"]))}))}searchBarClicked(){this.searchResults.length>0&&(this.searchResultsActive=!0)}verify(){this.scanQR()}onCamerasFound(t){this.availableDevices=t,this.hasDevices=Boolean(t&&t.length)}onDeviceSelectChange(t){const e=this.availableDevices.find(e=>e.deviceId===t);this.currentDevice=e||null}onHasPermission(t){this.hasPermission=t}onTorchCompatible(t){this.torchAvailable$.next(t||!1)}toggleTorch(){this.torchEnabled=!this.torchEnabled}toggleTryHarder(){this.tryHarder=!this.tryHarder}qrSuccessHandler(t){return Object(i.a)(this,void 0,void 0,(function*(){console.log(t),alert("success!"),(yield this.q.os.social.verify(this.pubKey,JSON.parse(t)))?this.isVerified=!0:(this.q.os.ui.showSnack("Verification Failed",{duration:2e3}),this.isVerified=!1),this.closePopup()}))}closeQR(){setTimeout(()=>{this.closePopup()},500)}scanQR(){this.open(this.qrPop)}showVerificationQR(){return Object(i.a)(this,void 0,void 0,(function*(){if(this.isMyProfile){let t=yield this.q.os.social.profile.getVerificationQR();console.log(t),this.generateQR(t),this.open(this.qrCode),this.q.os.social.profile.startVerificationWorker()}}))}open(t){this.popupRef.push(this.dialog.open(t,{context:"this is some additional data passed to dialog"}))}closePopup(){console.log("close toggled"),this.popupRef[this.popupRef.length-1].close(),this.popupRef.pop()}generateQR(t){return Object(i.a)(this,void 0,void 0,(function*(){console.log(t),this.qrCodeURLSafe=this._sanitizer.bypassSecurityTrustUrl(yield this.q.os.utilities.qr.generate(t))}))}generateInviteCode(){}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(o.a),r.Sb(o.c),r.Sb(r.C),r.Sb(M.b),r.Sb(c.l),r.Sb(r.h),r.Sb(s.a))},t.\u0275cmp=r.Mb({type:t,selectors:[["app-social-profile"]],viewQuery:function(t,e){var n;1&t&&(r.Mc(nt,!0),r.Mc(ot,!0),r.Mc(it,!0)),2&t&&(r.uc(n=r.gc())&&(e.qrPop=n.first),r.uc(n=r.gc())&&(e.createPop=n.first),r.uc(n=r.gc())&&(e.qrCode=n.first))},hostAttrs:[1,"profileLayoutColumn"],inputs:{pubKey:"pubKey",buttonTitle:"buttonTitle",replyTree:"replyTree",groupedTimeline:"groupedTimeline"},features:[r.Db],decls:20,vars:12,consts:[["qrPop",""],["qrCode",""],["class","poster",4,"ngIf"],["class","pp",4,"ngIf"],["class","details mat-elevation-z6",4,"ngIf"],["class","newPostContainer mat-elevation-z8",4,"ngIf"],[3,"combinedTimeline","isMyProfile",4,"ngFor","ngForOf"],["class","fundUs",3,"click",4,"ngIf"],["class","results social-search-results",4,"ngIf"],[1,"search","profileSearch"],[1,"message-row"],[2,"width","100%"],["fullWidth","","nbInput","","type","text",1,"mat-elevation-z16",3,"ngModel","placeholder","ngModelChange","focus","blur","mouseenter","mouseleave","keyup.enter","keyup","click"],["nbSuffix","","nbButton","","ghost","",1,"searchButtonWrapper",3,"click"],["class","searchButton","icon","search-outline",4,"ngIf","ngIfElse"],["title",""],[2,"color","goldenrod"],[1,"qrScanWrapper"],[3,"torch","device","formats","tryHarder","deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible"],["mat-stroked-button","","color","primary",2,"border","1px solid #ffffff24",3,"click"],[2,"margin","10px","color","goldenrod"],[1,"qrCodeWrapper"],["alt","",1,"qrCodeShowGenerate",3,"src"],[1,"poster"],["class","profilePrivacy private mat-elevatation-z6",3,"click",4,"ngIf"],["class","profilePrivacy mat-elevatation-z14",3,"click",4,"ngIf"],[1,"profilePrivacy","private","mat-elevatation-z6",3,"click"],["icon","lock-outline"],[1,"profilePrivacy","mat-elevatation-z14",3,"click"],["icon","globe-outline"],[1,"pp"],["src","./assets/defaultAvatar.png",1,"mat-elevation-z14"],[1,"details","mat-elevation-z6"],[3,"class","click",4,"ngIf"],["mat-stroked-button","","color","primary","class","defaultSettingsButton thickOutlineButton editButton",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary","class","defaultSettingsButton thickOutlineButton editButton starButton verifyButton",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary","class","defaultSettingsButton thickOutlineButton editButton starButton active verifyButton",4,"ngIf"],["mat-stroked-button","","color","primary","class","defaultSettingsButton thickOutlineButton editButton starButton",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary","class","defaultSettingsButton thickOutlineButton editButton starButton active",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary","class","defaultSettingsButton thickOutlineButton editButton starButton pending",3,"click",4,"ngIf"],[1,"name"],[1,"alias"],[1,"fullname"],[1,"about"],["class","pubKeyDisplay Icon",3,"click",4,"ngIf"],[3,"click"],["mat-stroked-button","","color","primary",1,"defaultSettingsButton","thickOutlineButton","editButton",3,"click"],["mat-stroked-button","","color","primary",1,"defaultSettingsButton","thickOutlineButton","editButton","starButton","verifyButton",3,"click"],["icon","checkmark-circle-2-outline"],["mat-stroked-button","","color","primary",1,"defaultSettingsButton","thickOutlineButton","editButton","starButton","active","verifyButton"],["mat-stroked-button","","color","primary",1,"defaultSettingsButton","thickOutlineButton","editButton","starButton",3,"click"],["icon","star-outline"],["mat-stroked-button","","color","primary",1,"defaultSettingsButton","thickOutlineButton","editButton","starButton","active",3,"click"],["icon","message-circle-outline"],["mat-stroked-button","","color","primary",1,"defaultSettingsButton","thickOutlineButton","editButton","starButton","pending",3,"click"],[1,"pubKeyDisplay","Icon",3,"click"],["xmlns","http://www.w3.org/2000/svg","enable-background","new 0 0 24 24","viewBox","0 0 24 24","fill","black","width","18px","height","18px",1,"pubKeyIcon"],["fill","none","height","24","width","24"],["d","M15,21h-2v-2h2V21z M13,14h-2v5h2V14z M21,12h-2v4h2V12z M19,10h-2v2h2V10z M7,12H5v2h2V12z M5,10H3v2h2V10z M12,5h2V3h-2V5 z M4.5,4.5v3h3v-3H4.5z M9,9H3V3h6V9z M4.5,16.5v3h3v-3H4.5z M9,21H3v-6h6V21z M16.5,4.5v3h3v-3H16.5z M21,9h-6V3h6V9z M19,19v-3 l-4,0v2h2v3h4v-2H19z M17,12l-4,0v2h4V12z M13,10H7v2h2v2h2v-2h2V10z M14,9V7h-2V5h-2v4L14,9z M6.75,5.25h-1.5v1.5h1.5V5.25z M6.75,17.25h-1.5v1.5h1.5V17.25z M18.75,5.25h-1.5v1.5h1.5V5.25z"],["class","pubKeyDisplay",3,"click",4,"ngIf"],["matInput","","placeholder","Alias","name","newAlias",3,"ngModel","ngModelChange"],["matInput","","placeholder","Full Name","name","newFullName",3,"ngModel","ngModelChange"],[1,"about",2,"padding-bottom","20px"],["matInput","","name","about",3,"ngModel","ngModelChange"],["mat-stroked-button","","color","primary",1,"defaultSettingsButton","thickOutlineButton","saveButton",3,"click"],["mat-stroked-button","","color","primary",1,"defaultSettingsButton","thickOutlineButton","discardButton",3,"click"],[1,"pubKeyDisplay",3,"click"],[1,"newPostContainer","mat-elevation-z8"],["matInput","","name","newPost","placeholder","What's going on?",3,"ngModel","ngModelChange"],["emoji","grinning","set","apple","size","24",1,"emojiPickerTrigger",3,"nbPopover"],["emojiPickerRef",""],["mat-stroked-button","","color","primary",1,"defaultSettingsButton","postButton",3,"click"],["title","Pick your emoji\u2026","emoji","blush","darkMode","true",1,"emojiPicker",3,"emojiClick"],[3,"combinedTimeline","isMyProfile"],[1,"fundUs",3,"click"],["mat-stroked-button","","color","secondary","class","mat-elevation-z18 defaultSettingsButton noOutlineButton fundButton",4,"ngIf"],["mat-stroked-button","","color","secondary",1,"mat-elevation-z18","defaultSettingsButton","noOutlineButton","fundButton"],[1,"results","social-search-results"],["class","resultCardWrapper",4,"ngFor","ngForOf"],[1,"resultCardWrapper"],["fxLayout","row",1,"resultCard","mat-elevation-z6",3,"routerLink"],[1,"searchResultPp"],["src","./assets/defaultAvatar.png",1,"searchResultPpImg"],[1,"searchResultColumn"],[1,"searchResultAlias"],[1,"searchResultFullName"],[1,"searchResultConnection","topCorner"],["icon","star-outline","style","opacity: 0.2;",4,"ngIf"],["icon","message-circle-outline",3,"click",4,"ngIf"],["icon","star-outline",4,"ngIf"],[1,"searchResultAbout","searchResultColumn",2,"flex","auto"],[1,"searchResultAboutWrapper"],[1,"searchResultConnection","searchResultColumn",2,"margin-top","27px","margin-right","10px"],["icon","star-outline",2,"opacity","0.2"],["icon","message-circle-outline",3,"click"],["icon","search-outline",1,"searchButton"]],template:function(t,e){if(1&t&&(r.Gc(0,rt,9,4,"ng-template",null,0,r.Hc),r.Gc(2,ct,10,1,"ng-template",null,1,r.Hc),r.Gc(4,lt,3,2,"div",2),r.Gc(5,pt,2,0,"div",3),r.Gc(6,xt,16,11,"div",4),r.Gc(7,vt,13,4,"div",4),r.Gc(8,Mt,7,2,"div",5),r.Gc(9,yt,1,2,"social-timeline-post-combined-timeline",6),r.Gc(10,wt,3,2,"div",7),r.Gc(11,Nt,2,1,"div",8),r.Yb(12,"div",9),r.Yb(13,"div",10),r.Yb(14,"div",11),r.Yb(15,"input",12),r.fc("ngModelChange",(function(t){return e.searchPhrase=t}))("focus",(function(){return e.inputFocus=!0}))("blur",(function(){return e.inputFocus=!1}))("mouseenter",(function(){return e.inputHover=!0}))("mouseleave",(function(){return e.inputHover=!1}))("keyup.enter",(function(){return e.search()}))("keyup",(function(){return e.parseSearchBar()}))("click",(function(){return e.searchBarClicked()})),r.Xb(),r.Yb(16,"button",13),r.fc("click",(function(){return e.search()})),r.Gc(17,Rt,1,0,"nb-icon",14),r.Gc(18,Yt,1,1,"ng-template",null,15,r.Hc),r.Xb(),r.Xb(),r.Xb(),r.Xb()),2&t){const t=r.vc(19);r.Fb(4),r.pc("ngIf",!e.searchResultsActive),r.Fb(1),r.pc("ngIf",!e.searchResultsActive),r.Fb(1),r.pc("ngIf",!e.editDetails&&!e.searchResultsActive),r.Fb(1),r.pc("ngIf",e.editDetails&&!e.searchResultsActive),r.Fb(1),r.pc("ngIf",e.isMyProfile),r.Fb(1),r.pc("ngForOf",e.groupedTimeline),r.Fb(1),r.pc("ngIf",!e.searchResultsActive),r.Fb(1),r.pc("ngIf",e.searchResultsActive),r.Fb(4),r.qc("placeholder","Who are you looking for?"),r.pc("ngModel",e.searchPhrase),r.Fb(2),r.pc("ngIf",!e.buttonTitle)("ngIfElse",t)}},directives:[a.m,a.l,y.b,y.j,y.m,c.E,c.d,c.f,c.c,_.a,c.e,l.a,c.o,k.a,w.a,c.z,F.a,tt,et.b,o.d],styles:[".browse-files-button[_ngcontent-%COMP%]{border-radius:3px;padding:5px;color:purple}.importButton[_ngcontent-%COMP%]{color:purple!important}.captchaScreen[_ngcontent-%COMP%], .inviteScreen[_ngcontent-%COMP%], .joinScreen[_ngcontent-%COMP%]{background-color:#222b45;padding:20px;text-align:center}.captchaScreen[_ngcontent-%COMP%], .captchaScreen[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .chatScreen[_ngcontent-%COMP%], .inviteScreen[_ngcontent-%COMP%], .inviteScreen[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .joinScreen[_ngcontent-%COMP%], .joinScreen[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%}.poster[_ngcontent-%COMP%]{height:30vh;background-color:#111161}.qrCodeShowGenerate[_ngcontent-%COMP%]{max-width:85vw}.pp[_ngcontent-%COMP%]{border-radius:5px;overflow:hidden;position:relative;left:30px;top:-30px;z-index:1}.pp[_ngcontent-%COMP%], .pp[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:60px;height:60px}.name[_ngcontent-%COMP%]{white-space:nowrap}.alias[_ngcontent-%COMP%]{font-size:24px}.alias[_ngcontent-%COMP%], .fullname[_ngcontent-%COMP%]{white-space:nowrap;float:left}.fullname[_ngcontent-%COMP%]{margin-left:20px;opacity:.5}.about[_ngcontent-%COMP%]{clear:both;padding-top:30px;padding-right:20px}.details[_ngcontent-%COMP%]{overflow:hidden;background:#2d2b2b;color:#fff;padding-left:20px;font-size:20px;padding-top:60px;z-index:0;padding-bottom:50px;margin-top:-60px;margin-bottom:42px;color:#6d95ce;z-index:11;background:#151b2e;background:linear-gradient(90deg,#151b2e,rgba(16,22,41,.5882352941176471))}.editButton[_ngcontent-%COMP%]{font-size:20px;z-index:1;float:right;margin-right:20px;margin-top:-15px}.discardButton[_ngcontent-%COMP%], .saveButton[_ngcontent-%COMP%]{font-size:20px;z-index:1;float:right;margin-right:23px}.fundButton[_ngcontent-%COMP%]{background:#bfbf13!important;font-size:16px!important}.profilePrivacy[_ngcontent-%COMP%]{position:relative;float:right;font-size:19px;right:18px;background:#eed864;font-weight:700;border-radius:4px;color:rgba(39,105,247,.7803921568627451);font-family:Ubuntu;line-height:30px;padding:3px 10px;cursor:pointer;top:18px;z-indeX:1}.profilePrivacy[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:24px;opacity:.7;position:relative;top:2px}@media only screen and (max-width:600px){.fullname[_ngcontent-%COMP%]{clear:both;margin-left:0}}input[_ngcontent-%COMP%]{caret-color:#fff}.pubKeyDisplay[_ngcontent-%COMP%]{left:99px;right:8px;line-height:7px;font-size:7px;font-family:MONOSPACE;word-break:break-all;overflow:hidden;color:rgba(211,166,65,.25098039215686274)!important;z-index:9999;top:-45px;margin-top:-53px;margin-bottom:23px;margin-left:78px}.pubKeyDisplay.true[_ngcontent-%COMP%]{cursor:pointer}.starButton[_ngcontent-%COMP%]{color:rgba(42,68,120,.5098039215686274);border:0 solid transparent!important}.starButton[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:2.5rem}.starButton[_ngcontent-%COMP%]:hover{color:rgba(37,109,255,.5607843137254902)}.starButton.active[_ngcontent-%COMP%]{color:#256dff;border:0 solid transparent!important;font-size:2.5rem}.starButton.active[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:2rem}.starButton.pending[_ngcontent-%COMP%]{color:#256dff;border:0 solid transparent!important;font-size:2.5rem}.search[_ngcontent-%COMP%]{z-index:23;position:fixed;right:0;left:0;padding:20px;height:95px;bottom:28px}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:Ubuntu;position:absolute;letter-spacing:1px;color:rgba(241,237,205,.8196078431372549);padding:10px 10px 10px 26px;font-size:16px;left:5%;width:90%;font-weight:500!important}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:1px solid red}.search[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:1.75rem}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:rgba(41,104,245,.8313725490196079)}.pp[_ngcontent-%COMP%]{z-index:12}.fundUs[_ngcontent-%COMP%]{z-index:2;width:100%;padding-bottom:192px;text-align:center;margin-top:38px}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;height:40px;width:40px;border:0;color:#7b9cc3;padding-right:8px;width:50px;position:absolute;top:19px;right:5%}.search[_ngcontent-%COMP%]   .searchButton[_ngcontent-%COMP%]:focus, .search[_ngcontent-%COMP%]   .searchButtonWrapper[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]   .searchButtonWrapper[_ngcontent-%COMP%]:focus{outline:none!important;border:0!important;box-shadow:none!important}.results[_ngcontent-%COMP%]{background:linear-gradient(90deg,#151b2e,rgba(16,22,41,.59));font-family:Ubuntu;overflow:hidden;overflow-y:auto;position:fixed;left:0;right:0;bottom:27px;top:49px;z-index:22}.resultCardWrapper[_ngcontent-%COMP%]{padding:20px 4% 20px 5%}.resultCardWrapper[_ngcontent-%COMP%]:first-child{padding-top:60px;padding-bottom:20px}.resultCardWrapper[_ngcontent-%COMP%]:last-child{padding-bottom:120px}.searchResultAlias[_ngcontent-%COMP%]{font-size:18px}.searchResultPp[_ngcontent-%COMP%], .searchResultPpImg[_ngcontent-%COMP%]{height:100px}.searchResultColumn[_ngcontent-%COMP%]{color:#4f84e2;padding:10px 10px 10px 20px}.searchResultConnection.topCorner[_ngcontent-%COMP%]{display:none;color:#4f84e2;margin-top:7px}.searchResultAboutWrapper[_ngcontent-%COMP%]{width:100%}.resultCard[_ngcontent-%COMP%]{border-radius:5px;flex-direction:row;box-sizing:border-box;display:flex;background:linear-gradient(90deg,#151b2e,rgba(16,22,41,.5882352941176471));background:linear-gradient(90deg,#192752,rgba(16,22,41,.5882352941176471));background:linear-gradient(90deg,#192752,rgba(16,22,41,.8313725490196079));overflow:hidden;cursor:pointer;border:1px solid transparent}.resultCard[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#151b2e,rgba(16,22,41,.8313725490196079));overflow:hidden;border:1px solid red}.searchResultFullName[_ngcontent-%COMP%]{color:rgba(79,132,226,.5411764705882353)}@media only screen and (max-width:816px){.searchResultColumn[_ngcontent-%COMP%]{padding-left:10px}.searchResultConnection.searchResultColumn[_ngcontent-%COMP%]{display:none}.searchResultConnection.topCorner[_ngcontent-%COMP%]{display:block}.resultCard[_ngcontent-%COMP%]{flex-flow:row wrap}}.newPostContainer[_ngcontent-%COMP%], .postContainer[_ngcontent-%COMP%]{background:rgba(30,36,55,.788235294117647);margin-left:5vw;border-radius:10px;padding:40px;opacity:.9;font-family:Ubuntu;font-size:22px;color:#4680e9;margin-right:5vw;text-align:right;margin-bottom:5vh;border:1px solid rgba(255,0,0,.25882352941176473);display:block}.postContainer[_ngcontent-%COMP%]{text-align:left;border:1px solid rgba(45,99,236,.6509803921568628);border-radius:0;margin-top:-56px}.postContainer.level-0[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;margin-top:0}.postOuterWrapper[_ngcontent-%COMP%]:last-child   .postContainer[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px;margin-top:-56px}.postButton[_ngcontent-%COMP%]{color:rgba(198,196,137,.7803921568627451);font-family:Ubuntu;font-size:16px;margin-top:4vh;border:2px solid rgba(157,175,170,.7490196078431373)}.postDelete[_ngcontent-%COMP%]{float:right;color:rgba(255,0,0,.8117647058823529);margin-left:10px;font-size:20px;position:relative;top:-1px;cursor:pointer}.postTime[_ngcontent-%COMP%]{float:right;color:#452781}.newPostContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-moz-placeholder{color:#ff0045}.newPostContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:-ms-input-placeholder{color:#ff0045}.newPostContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#ff0045}.mat-input-element[_ngcontent-%COMP%]{caret-color:#546184;text-align:left;border:1px solid transparent;border-radius:5px;padding:10px}.mat-input-element[_ngcontent-%COMP%]:focus{border:1px solid red}.mat-input-element[_ngcontent-%COMP%]::-moz-placeholder:focus{display:none}.mat-input-element[_ngcontent-%COMP%]:-ms-input-placeholder:focus{display:none}.mat-input-element[_ngcontent-%COMP%]::placeholder:focus{display:none}.emojiPickerTrigger[_ngcontent-%COMP%]{opacity:1;z-index:9;padding:8px;margin-right:10px;cursor:pointer;right:0;position:relative;top:3px}.emojiPicker[_ngcontent-%COMP%]{z-index:222222!important;position:relative;right:70px;background:transparent}  nb-popover{background:transparent!important}@media only screen and (max-width:616px){.newPostContainer[_ngcontent-%COMP%], .postContainer[_ngcontent-%COMP%]{margin-right:0!important;border-radius:0;border-top:1px solid #40389e!important;border-bottom:1px solid #423193!important;margin:0 5vw 15px 0}.postContainer[_ngcontent-%COMP%]:last-child{margin-bottom:40px}}.emojiPicker[_ngcontent-%COMP%]{right:60px;font-size:19px;right:22px;font-weight:700;border-radius:4px;color:rgba(39,105,247,.7803921568627451);font-family:Ubuntu;line-height:30px;padding:3px 10px;cursor:pointer;top:20px}@media only screen and (min-width:420px) and (max-width:480px){.emojiPicker[_ngcontent-%COMP%]{right:-40px}}@media only screen and (min-width:480px) and (max-width:900px){.emojiPicker[_ngcontent-%COMP%]{right:0}}.profilePrivacy.private[_ngcontent-%COMP%]{background:rgba(231,213,100,.6784313725490196);font-weight:700;border-radius:4px;color:rgba(39,105,247,.7803921568627451);font-family:Ubuntu;line-height:30px;padding:3px 10px;cursor:pointer;top:20px}.postContainer.reply[_ngcontent-%COMP%]{border-left:8px solid;border-right:8px solid;border-top:1px solid;position:relative;margin:-17px 6vw 0;top:22px}.postContainer.singleLevel[_ngcontent-%COMP%]{margin-top:40px!important;margin-bottom:20px;border-radius:10px!important}.postContainer.singleLevel.replyPost[_ngcontent-%COMP%]{margin-top:0!important;border-radius:10px!important}.replyLoop[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .postContainer[_ngcontent-%COMP%]{border-radius:0;border-bottom-left-radius:10px;border-bottom-right-radius:10px}.replyLoop[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%] > .postContainer[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;margin-top:30px}.replyLoop[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%] > .postContainer[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px}.pubKeyIcon[_ngcontent-%COMP%]{width:35px;height:35px;fill:rgba(63,62,167,.7686274509803922);position:static;right:30px;cursor:pointer}.pubKeyDisplay.Icon[_ngcontent-%COMP%]{float:right;margin:0 30px 0 0;padding:0;height:0;overflow:visible}.pubKeyDisplay.Icon[_ngcontent-%COMP%]:hover   .pubKeyIcon[_ngcontent-%COMP%]{fill:#5851bb}@media only screen and (max-width:807px){.pubKeyDisplay[_ngcontent-%COMP%]{max-height:20px;text-overflow:ellipsis;line-height:10px;font-size:10px;font-family:MONOSPACE;word-break:break-all;overflow:hidden}.editButton[_ngcontent-%COMP%]{margin-top:-9px}}"],changeDetection:0}),t})();const At=["qrPop"],Lt=["createPop"];function Dt(t,e){1&t&&r.Tb(0,"nb-icon",8)}function Et(t,e){if(1&t&&r.Ic(0),2&t){const t=r.jc();r.Jc(t.buttonTitle)}}function Kt(t,e){if(1&t&&r.Tb(0,"social-timeline-post-combined-timeline",13),2&t){const t=e.$implicit,n=r.jc(2);r.pc("combinedTimeline",t)("isMyProfile",n.isMyProfile)}}function Vt(t,e){if(1&t){const t=r.Zb();r.Yb(0,"div",14),r.fc("click",(function(){return r.xc(t),r.jc(2).syncMore()})),r.Yb(1,"button",15),r.Ic(2," Sync More "),r.Xb(),r.Xb()}}function Gt(t,e){1&t&&(r.Yb(0,"div",16),r.Yb(1,"a",17),r.Yb(2,"button",18),r.Ic(3," Syncing... "),r.Xb(),r.Xb(),r.Xb())}function Ht(t,e){if(1&t&&(r.Yb(0,"div",9),r.Gc(1,Kt,1,2,"social-timeline-post-combined-timeline",10),r.Gc(2,Vt,3,0,"div",11),r.Gc(3,Gt,4,0,"div",12),r.Xb()),2&t){const t=r.jc();r.Fb(1),r.pc("ngForOf",t.groupedTimeline),r.Fb(1),r.pc("ngIf",!t.searchResultsActive&&t.groupedTimeline.length>0),r.Fb(1),r.pc("ngIf",!(t.searchResultsActive||0!=t.groupedTimeline.length&&t.syncStatus))}}const Wt=["qrPop"],Zt=["createPop"];function Ut(t,e){1&t&&r.Tb(0,"nb-icon",11)}function $t(t,e){if(1&t&&r.Ic(0),2&t){const t=r.jc();r.Jc(t.buttonTitle)}}function Qt(t,e){1&t&&r.Tb(0,"social-timeline-post-combined-timeline",12),2&t&&r.pc("combinedTimeline",e.$implicit)}function Jt(t,e){1&t&&(r.Yb(0,"div",13),r.Tb(1,"nb-icon",14),r.Xb())}function te(t,e){if(1&t&&(r.Yb(0,"div",17),r.Tb(1,"app-social-profile-post",18),r.Xb()),2&t){const t=r.jc().$implicit,e=r.jc();r.Fb(1),r.pc("postObj",t)("isMyProfile",e.isMyProfile)}}function ee(t,e){if(1&t&&(r.Yb(0,"div",15),r.Gc(1,te,2,2,"div",16),r.Xb()),2&t){const t=e.$implicit;r.Fb(1),r.pc("ngIf",null!=t.content&&t.content.length>0)}}const ne=[{path:"",redirectTo:"profile",pathMatch:"full"},{path:"",component:x,children:[{path:"profile/:pubKey",component:Xt},{path:"profile",component:Xt},{path:"stream/:algoName",component:(()=>{class t{constructor(t,e,n,o){this._sanitizer=t,this.dialog=e,this.cd=n,this.q=o,this.pubKey="NoProfileSelected",this.postList=[],this.initRnd=0,this.DEVMODE=O.dev,this.buttonTitle="",this.status="",this.inputFocus=!1,this.inputHover=!1,this.searchPhrase="",this.searchResults=[],this.searchResultsActive=!1,this.noProfileSelected="NoProfileSelected",this.syncSub={},this.groupedTimeline=[],this.replyTree={},this.syncStatus=!0,this.popupRef=[]}parseSearchBar(){this.searchPhrase.length>0?this.search():this.cd.detectChanges()}search(){return Object(i.a)(this,void 0,void 0,(function*(){this.searchResults=yield this.q.os.social.timeline.search(this.searchPhrase),this.timeline=this.searchResults.length>0?this.searchResults:this.q.os.social.timeline.get(),this.cd.detectChanges()}))}updateListen(){this.groupedTimeline=[],this.replyTree={},void 0===this.syncSub.all&&(this.syncSub.all=this.q.os.social.timeline.agent.onSync("all").subscribe(t=>Object(i.a)(this,void 0,void 0,(function*(){void 0!==t&&void 0!==t.groupedTimeline?(this.groupedTimeline=t.groupedTimeline,this.syncStatus=!0,this.q.os.ui.showSnack("Stream Synced!","Yeah",{duration:1e3}),this.cd.detectChanges(),setTimeout(()=>{this.cd.detectChanges()},5e3),setTimeout(()=>{this.cd.detectChanges()},12e3)):this.syncStatus=!0}))))}ngOnDestroy(){try{this.onAlgoChange.unsubscribe()}catch(e){}let t=Object.keys(this.syncSub);for(let n of t)this.syncSub[n].unsubscribe()}ngOnInit(t=!1){return Object(i.a)(this,void 0,void 0,(function*(){this.q.os.ui.showSnack("Syncing Stream...","Please Wait"),this.syncStatus=!1,this.updateListen();let e=yield this.q.os.social.timeline.agent.sync("all");this.groupedTimeline=e.groupedTimeline,this.syncStatus=!0,t||(this.onAlgoChange=this.q.os.social.algo.onSelect().subscribe(t=>Object(i.a)(this,void 0,void 0,(function*(){this.ngOnInit(!0)}))))}))}unsubscribeAll(){let t=Object.keys(this.syncSub);for(let n of t)try{this.syncSub[n].unsubscribe(),delete this.syncSub[this.pubKey]}catch(e){}}ngOnChanges(){return Object(i.a)(this,void 0,void 0,(function*(){}))}searchBarClicked(){}syncMoreWorker(){return Object(i.a)(this,void 0,void 0,(function*(){let t=this.q.os.social.timeline.agent.getLimit("all");t+=5;let e=yield this.q.os.social.timeline.agent.sync("all",{limit:t});this.groupedTimeline=e.groupedTimeline,this.syncStatus=!0,this.q.os.ui.showSnack("Stream Synced!","Yay",{duration:1e3}),console.log(this.groupedTimeline),this.cd.detectChanges()}))}syncMore(){return Object(i.a)(this,void 0,void 0,(function*(){this.q.os.ui.showSnack("Syncing Stream...","Please Wait"),this.syncStatus=!1,this.cd.detectChanges(),setTimeout(()=>{this.syncMoreWorker()},3e3)}))}open(t){this.popupRef.push(this.dialog.open(t,{context:"this is some additional data passed to dialog"}))}closePopup(){console.log("close toggled"),this.popupRef[this.popupRef.length-1].close(),this.popupRef.pop()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(M.b),r.Sb(c.l),r.Sb(r.h),r.Sb(s.a))},t.\u0275cmp=r.Mb({type:t,selectors:[["app-social-stream"]],viewQuery:function(t,e){var n;1&t&&(r.Mc(At,!0),r.Mc(Lt,!0)),2&t&&(r.uc(n=r.gc())&&(e.qrPop=n.first),r.uc(n=r.gc())&&(e.createPop=n.first))},inputs:{initRnd:"initRnd",buttonTitle:"buttonTitle",groupedTimeline:"groupedTimeline"},features:[r.Db],decls:9,vars:5,consts:[[1,"search"],[1,"message-row"],[2,"width","100%"],["fullWidth","","nbInput","","type","text",1,"mat-elevation-z16",3,"ngModel","placeholder","ngModelChange","focus","blur","mouseenter","mouseleave","keyup.enter","keyup","click"],["nbSuffix","","nbButton","","ghost","",1,"searchButtonWrapper",3,"click"],["class","searchButton","icon","search-outline",4,"ngIf","ngIfElse"],["title",""],["class","postViewer",4,"ngIf"],["icon","search-outline",1,"searchButton"],[1,"postViewer"],[3,"combinedTimeline","isMyProfile",4,"ngFor","ngForOf"],["class","fundUs",3,"click",4,"ngIf"],["class","fundUs","style","margin-top: 40vh;",4,"ngIf"],[3,"combinedTimeline","isMyProfile"],[1,"fundUs",3,"click"],["mat-stroked-button","","color","secondary",1,"mat-elevation-z18","defaultSettingsButton","noOutlineButton","fundButton"],[1,"fundUs",2,"margin-top","40vh"],["target","_blank",1,"mat-elevation-z18"],["mat-stroked-button","","color","secondary",1,"defaultSettingsButton","noOutlineButton","fundButton"]],template:function(t,e){if(1&t&&(r.Yb(0,"div",0),r.Yb(1,"div",1),r.Yb(2,"div",2),r.Yb(3,"input",3),r.fc("ngModelChange",(function(t){return e.searchPhrase=t}))("focus",(function(){return e.inputFocus=!0}))("blur",(function(){return e.inputFocus=!1}))("mouseenter",(function(){return e.inputHover=!0}))("mouseleave",(function(){return e.inputHover=!1}))("keyup.enter",(function(){return e.search()}))("keyup",(function(){return e.parseSearchBar()}))("click",(function(){return e.searchBarClicked()})),r.Xb(),r.Yb(4,"button",4),r.fc("click",(function(){return e.search()})),r.Gc(5,Dt,1,0,"nb-icon",5),r.Gc(6,Et,1,1,"ng-template",null,6,r.Hc),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Gc(8,Ht,4,3,"div",7)),2&t){const t=r.vc(7);r.Fb(3),r.qc("placeholder","What are you looking for?"),r.pc("ngModel",e.searchPhrase),r.Fb(2),r.pc("ngIf",!e.buttonTitle)("ngIfElse",t),r.Fb(3),r.pc("ngIf",e.syncStatus)}},directives:[y.b,y.j,y.m,c.E,a.m,c.o,a.l,tt,l.a],styles:[".browse-files-button[_ngcontent-%COMP%]{border-radius:3px;padding:5px;color:purple}.importButton[_ngcontent-%COMP%]{color:purple!important}.captchaScreen[_ngcontent-%COMP%], .inviteScreen[_ngcontent-%COMP%], .joinScreen[_ngcontent-%COMP%]{background-color:#222b45;padding:20px;text-align:center}.captchaScreen[_ngcontent-%COMP%], .captchaScreen[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .chatScreen[_ngcontent-%COMP%], .inviteScreen[_ngcontent-%COMP%], .inviteScreen[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .joinScreen[_ngcontent-%COMP%], .joinScreen[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%}.poster[_ngcontent-%COMP%]{height:30vh;background-color:#111161}.verifyButton[_ngcontent-%COMP%]{margin-right:70px!important}.pp[_ngcontent-%COMP%]{border-radius:5px;overflow:hidden;position:relative;left:30px;top:-30px;z-index:1}.pp[_ngcontent-%COMP%], .pp[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:60px;height:60px}.name[_ngcontent-%COMP%]{white-space:nowrap}.alias[_ngcontent-%COMP%]{font-size:24px}.alias[_ngcontent-%COMP%], .fullname[_ngcontent-%COMP%]{white-space:nowrap;float:left}.fullname[_ngcontent-%COMP%]{margin-left:20px;opacity:.5}.about[_ngcontent-%COMP%]{clear:both;padding-top:30px;padding-right:20px}.details[_ngcontent-%COMP%]{overflow:hidden;background:#2d2b2b;color:#fff;padding-left:20px;font-size:20px;padding-top:60px;z-index:0;padding-bottom:50px;margin-top:-60px;margin-bottom:42px;color:#6d95ce;z-index:11;background:#151b2e;background:linear-gradient(90deg,#151b2e,rgba(16,22,41,.5882352941176471))}.editButton[_ngcontent-%COMP%]{font-size:20px;z-index:1;float:right;margin-right:20px;margin-top:-15px}.discardButton[_ngcontent-%COMP%], .saveButton[_ngcontent-%COMP%]{font-size:20px;z-index:1;float:right;margin-right:23px}.fundButton[_ngcontent-%COMP%]{background:#bfbf13!important;font-size:16px!important}.profilePrivacy[_ngcontent-%COMP%]{position:absolute;font-size:19px;right:22px;background:#eed864;font-weight:700;border-radius:4px;color:rgba(39,105,247,.7803921568627451);font-family:Ubuntu;line-height:30px;padding:3px 10px;cursor:pointer;top:20px}.profilePrivacy[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:24px;opacity:.7;position:relative;top:2px}@media only screen and (max-width:600px){.fullname[_ngcontent-%COMP%]{clear:both;margin-left:0}}input[_ngcontent-%COMP%]{caret-color:#fff}.pubKeyDisplay[_ngcontent-%COMP%]{left:99px;right:8px;line-height:7px;font-size:7px;font-family:MONOSPACE;word-break:break-all;overflow:hidden;color:rgba(211,166,65,.25098039215686274)!important;z-index:9999;top:-45px;cursor:pointer;margin-top:-53px;margin-bottom:23px;margin-left:78px}@media only screen and (max-width:807px){.pubKeyDisplay[_ngcontent-%COMP%]{max-height:20px;text-overflow:ellipsis;line-height:10px;font-size:10px;font-family:MONOSPACE;word-break:break-all;overflow:hidden}.editButton[_ngcontent-%COMP%]{margin-top:-9px}}.starButton[_ngcontent-%COMP%]{color:rgba(42,68,120,.5098039215686274);border:0 solid transparent!important}.starButton[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:2.5rem}.starButton[_ngcontent-%COMP%]:hover{color:rgba(37,109,255,.5607843137254902)}.starButton.active[_ngcontent-%COMP%]{color:#256dff;border:0 solid transparent!important;font-size:2.5rem}.starButton.active[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:2rem}.starButton.pending[_ngcontent-%COMP%]{color:#256dff;border:0 solid transparent!important;font-size:2.5rem}.search[_ngcontent-%COMP%]{z-index:2;right:0;left:0;padding:20px;height:95px;bottom:28px;position:absolute;top:0}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:Ubuntu;position:absolute;letter-spacing:1px;color:rgba(241,237,205,.8196078431372549);padding:10px 10px 10px 26px;font-size:16px;left:5%;width:90%;font-weight:500!important}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:1px solid red}.search[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:1.75rem}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:rgba(41,104,245,.8313725490196079)}.pp[_ngcontent-%COMP%]{z-index:12}.fundUs[_ngcontent-%COMP%]{z-index:2;width:100%;margin-bottom:120px;text-align:center;margin-top:38px}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;height:40px;width:40px;border:0;color:#7b9cc3;padding-right:8px;width:50px;position:absolute;top:19px;right:5%}.search[_ngcontent-%COMP%]   .searchButton[_ngcontent-%COMP%]:focus, .search[_ngcontent-%COMP%]   .searchButtonWrapper[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]   .searchButtonWrapper[_ngcontent-%COMP%]:focus{outline:none!important;border:0!important;box-shadow:none!important}.results[_ngcontent-%COMP%]{background:linear-gradient(90deg,#151b2e,rgba(16,22,41,.59));font-family:Ubuntu;overflow:hidden;overflow-y:auto;position:absolute;left:0;right:0;bottom:27px;top:0}.resultCardWrapper[_ngcontent-%COMP%]{padding:20px 4% 20px 5%}.resultCardWrapper[_ngcontent-%COMP%]:first-child{padding-top:60px;padding-bottom:20px}.resultCardWrapper[_ngcontent-%COMP%]:last-child{padding-bottom:120px}.searchResultAlias[_ngcontent-%COMP%]{font-size:18px}.searchResultPp[_ngcontent-%COMP%], .searchResultPpImg[_ngcontent-%COMP%]{height:100px}.searchResultColumn[_ngcontent-%COMP%]{color:#4f84e2;padding:10px 10px 10px 20px}.searchResultConnection.topCorner[_ngcontent-%COMP%]{display:none;color:#4f84e2;margin-top:7px}.searchResultAboutWrapper[_ngcontent-%COMP%]{width:100%}.resultCard[_ngcontent-%COMP%]{border-radius:5px;flex-direction:row;box-sizing:border-box;display:flex;background:linear-gradient(90deg,#151b2e,rgba(16,22,41,.5882352941176471));background:linear-gradient(90deg,#192752,rgba(16,22,41,.5882352941176471));overflow:hidden;cursor:pointer;border:1px solid transparent}.resultCard[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#151b2e,rgba(16,22,41,.5882352941176471));overflow:hidden;border:1px solid red}.searchResultFullName[_ngcontent-%COMP%]{color:rgba(79,132,226,.5411764705882353)}@media only screen and (max-width:816px){.searchResultColumn[_ngcontent-%COMP%]{padding-left:10px}.searchResultConnection.searchResultColumn[_ngcontent-%COMP%]{display:none}.searchResultConnection.topCorner[_ngcontent-%COMP%]{display:block}.resultCard[_ngcontent-%COMP%]{flex-flow:row wrap}}.postButton[_ngcontent-%COMP%]{color:rgba(198,196,137,.7803921568627451);font-family:Ubuntu;font-size:16px;margin-top:4vh;border:2px solid rgba(157,175,170,.7490196078431373)}.postDelete[_ngcontent-%COMP%]{float:right;color:rgba(255,0,0,.8117647058823529);margin-left:10px;font-size:20px;position:relative;top:-1px;cursor:pointer}.postTime[_ngcontent-%COMP%]{float:right;color:#452781}.newPostContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-moz-placeholder{color:#ff0045}.newPostContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:-ms-input-placeholder{color:#ff0045}.newPostContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#ff0045}.mat-input-element[_ngcontent-%COMP%]{caret-color:#546184;text-align:left;border:1px solid transparent;border-radius:5px;padding:10px}.mat-input-element[_ngcontent-%COMP%]:focus{border:1px solid red}.mat-input-element[_ngcontent-%COMP%]::-moz-placeholder:focus{display:none}.mat-input-element[_ngcontent-%COMP%]:-ms-input-placeholder:focus{display:none}.mat-input-element[_ngcontent-%COMP%]::placeholder:focus{display:none}.emojiPickerTrigger[_ngcontent-%COMP%]{opacity:1;z-index:9;padding:8px;margin-right:10px;cursor:pointer;right:0;position:relative;top:3px}.emojiPicker[_ngcontent-%COMP%]{z-index:222222!important;position:relative;right:70px;background:transparent}  nb-popover{background:transparent!important}@media only screen and (max-width:616px){.newPostContainer[_ngcontent-%COMP%], .postContainer[_ngcontent-%COMP%]{margin-left:0;margin-right:0!important;margin-top:0;border:0!important;margin-bottom:15px;border-radius:0;border-top:1px solid #40389e!important;border-bottom:1px solid #423193!important;width:100vw}.postContainer[_ngcontent-%COMP%]:last-child{margin-bottom:40px}}.emojiPicker[_ngcontent-%COMP%]{right:60px}@media only screen and (min-width:420px) and (max-width:480px){.emojiPicker[_ngcontent-%COMP%]{right:-40px}}@media only screen and (min-width:480px) and (max-width:900px){.emojiPicker[_ngcontent-%COMP%]{right:0}}.newPostContainer[_ngcontent-%COMP%], .postContainer[_ngcontent-%COMP%]{background:rgba(30,36,55,.788235294117647);margin-left:5vw;border-radius:10px;padding:40px;opacity:.9;font-family:Ubuntu;font-size:22px;color:#4680e9;margin-right:5vw;text-align:right;margin-bottom:5vh;border:1px solid rgba(255,0,0,.25882352941176473);display:block}.postContainer[_ngcontent-%COMP%]{text-align:left;border:1px solid rgba(45,99,236,.6509803921568628);border-radius:0;margin-top:-56px}.postContainer.level-0[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;margin-top:0}.postOuterWrapper[_ngcontent-%COMP%]:last-child   .postContainer[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px;margin-top:-56px}.postContainer.reply[_ngcontent-%COMP%]{border-left:8px solid;border-right:8px solid;border-top:1px solid;position:relative;margin:-17px 6vw 0;top:22px}.postContainer.singleLevel[_ngcontent-%COMP%]{margin-top:40px!important;margin-bottom:20px;border-radius:10px!important}.postContainer.singleLevel.replyPost[_ngcontent-%COMP%]{margin-top:0!important;border-radius:10px!important}.replyLoop[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .postContainer[_ngcontent-%COMP%]{border-radius:0;border-bottom-left-radius:10px;border-bottom-right-radius:10px}.replyLoop[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%] > .postContainer[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;margin-top:30px}.replyLoop[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%] > .postContainer[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px}.combinedTimeline[_ngcontent-%COMP%]:nth-child(2){margin-top:120px}.postViewer[_ngcontent-%COMP%]{position:absolute;left:0;top:20px;right:0;bottom:77px;overflow:hidden;overflow-y:auto;padding-top:20px}.postViewer[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.postViewer[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:rgba(78,132,229,.5607843137254902)}.postViewer[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:rgba(78,132,229,.5607843137254902);outline:0}"]}),t})()},{path:"timeline/post/:qHash",component:(()=>{class t{constructor(t,e,n,o,i){this.route=t,this._sanitizer=e,this.dialog=n,this.cd=o,this.q=i,this.pubKey="NoProfileSelected",this.postList=[],this.DEVMODE=O.dev,this.buttonTitle="",this.qHash="",this.status="",this.inputFocus=!1,this.inputHover=!1,this.searchPhrase="",this.searchResults=[],this.searchResultsActive=!1,this.noProfileSelected="NoProfileSelected",this.replies=[],this.groupedTimeline=[],this.syncStatus=!1,this.syncingStatus=!1,this.popupRef=[]}parseSearchBar(){}search(){return Object(i.a)(this,void 0,void 0,(function*(){}))}updateListen(){this.syncingStatus=!1,console.log("QD Social Timeline Post: Subscribing To Sync..",this.qHash),void 0!==this.syncSub&&this.syncSub.unsubscribe(),this.syncSub=this.q.os.social.timeline.agent.onSync("all").subscribe(t=>Object(i.a)(this,void 0,void 0,(function*(){try{console.log(t.timeline),this.groupedTimeline=[],this.replies=[];let e=[],n=t.timeline;for(let t of n)t.replyTo!=this.qHash||this.q.os.utilities.inArray(e,t.qHash)||(this.replies.push(t),e.push(t.qHash)),t.qHash==this.qHash&&(this.groupedTimeline=[[t]]);this.syncingStatus=!0,this.q.os.ui.showSnack("Replies Synced!","Yeah",{duration:2e3}),console.log("QD Social Timeline Post View: Replies Synced!"),this.cd.detectChanges(),setTimeout(()=>{this.cd.detectChanges()},2e3),setTimeout(()=>{this.cd.detectChanges()},6e3),setTimeout(()=>{this.cd.detectChanges()},1e4),setTimeout(()=>{this.cd.detectChanges()},15e3)}catch(e){console.log(e)}})))}ngOnInit(){return Object(i.a)(this,void 0,void 0,(function*(){this.updateListen(),this.paramSub=this.route.params.subscribe(t=>Object(i.a)(this,void 0,void 0,(function*(){console.log(t),this.qHash=t.qHash,this.ngOnChanges()})))}))}ngOnChanges(){return Object(i.a)(this,void 0,void 0,(function*(){this.q.os.ui.showSnack("Syncing Replies...","Please Wait"),yield this.q.os.social.timeline.agent.sync("all",{limit:0})}))}ngOnDestroy(){this.paramSub.unsubscribe(),void 0!==this.syncSub&&this.syncSub.unsubscribe()}searchBarClicked(){}open(t){this.popupRef.push(this.dialog.open(t,{context:"this is some additional data passed to dialog"}))}closePopup(){console.log("close toggled"),this.popupRef[this.popupRef.length-1].close(),this.popupRef.pop()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(o.a),r.Sb(M.b),r.Sb(c.l),r.Sb(r.h),r.Sb(s.a))},t.\u0275cmp=r.Mb({type:t,selectors:[["social-timeline-post"]],viewQuery:function(t,e){var n;1&t&&(r.Mc(Wt,!0),r.Mc(Zt,!0)),2&t&&(r.uc(n=r.gc())&&(e.qrPop=n.first),r.uc(n=r.gc())&&(e.createPop=n.first))},inputs:{buttonTitle:"buttonTitle",qHash:"qHash"},features:[r.Db],decls:12,vars:7,consts:[[1,"search"],[1,"message-row"],[2,"width","100%"],["fullWidth","","nbInput","","type","text",1,"mat-elevation-z16",3,"ngModel","placeholder","ngModelChange","focus","blur","mouseenter","mouseleave","keyup.enter","keyup","click"],["nbSuffix","","nbButton","","ghost","",1,"searchButtonWrapper",3,"click"],["class","searchButton","icon","search-outline",4,"ngIf","ngIfElse"],["title",""],[1,"postViewer"],[3,"combinedTimeline",4,"ngFor","ngForOf"],["class","repliesHeader",4,"ngIf"],["class","postOuterWrapper replyOuterWrapper",4,"ngFor","ngForOf"],["icon","search-outline",1,"searchButton"],[3,"combinedTimeline"],[1,"repliesHeader"],["icon","message-square-outline",1,"repliesIcon"],[1,"postOuterWrapper","replyOuterWrapper"],["class","postWrapper",4,"ngIf"],[1,"postWrapper"],[1,"postContainer","mat-elevation-z8","post","singleLevel",3,"postObj","isMyProfile"]],template:function(t,e){if(1&t&&(r.Yb(0,"div",0),r.Yb(1,"div",1),r.Yb(2,"div",2),r.Yb(3,"input",3),r.fc("ngModelChange",(function(t){return e.searchPhrase=t}))("focus",(function(){return e.inputFocus=!0}))("blur",(function(){return e.inputFocus=!1}))("mouseenter",(function(){return e.inputHover=!0}))("mouseleave",(function(){return e.inputHover=!1}))("keyup.enter",(function(){return e.search()}))("keyup",(function(){return e.parseSearchBar()}))("click",(function(){return e.searchBarClicked()})),r.Xb(),r.Yb(4,"button",4),r.fc("click",(function(){return e.search()})),r.Gc(5,Ut,1,0,"nb-icon",5),r.Gc(6,$t,1,1,"ng-template",null,6,r.Hc),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(8,"div",7),r.Gc(9,Qt,1,1,"social-timeline-post-combined-timeline",8),r.Gc(10,Jt,2,0,"div",9),r.Gc(11,ee,2,1,"div",10),r.Xb()),2&t){const t=r.vc(7);r.Fb(3),r.qc("placeholder","What are you looking for?"),r.pc("ngModel",e.searchPhrase),r.Fb(2),r.pc("ngIf",!e.buttonTitle)("ngIfElse",t),r.Fb(4),r.pc("ngForOf",e.groupedTimeline),r.Fb(1),r.pc("ngIf",null!=e.replies&&e.replies.length>0),r.Fb(1),r.pc("ngForOf",e.replies)}},directives:[y.b,y.j,y.m,c.E,a.m,a.l,c.o,tt,H],styles:[".browse-files-button[_ngcontent-%COMP%]{border-radius:3px;padding:5px;color:purple}.importButton[_ngcontent-%COMP%]{color:purple!important}.captchaScreen[_ngcontent-%COMP%], .inviteScreen[_ngcontent-%COMP%], .joinScreen[_ngcontent-%COMP%]{background-color:#222b45;padding:20px;text-align:center}.captchaScreen[_ngcontent-%COMP%], .captchaScreen[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .chatScreen[_ngcontent-%COMP%], .inviteScreen[_ngcontent-%COMP%], .inviteScreen[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .joinScreen[_ngcontent-%COMP%], .joinScreen[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%}.poster[_ngcontent-%COMP%]{height:30vh;background-color:#111161}.verifyButton[_ngcontent-%COMP%]{margin-right:70px!important}.pp[_ngcontent-%COMP%]{border-radius:5px;overflow:hidden;position:relative;left:30px;top:-30px;z-index:1}.pp[_ngcontent-%COMP%], .pp[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:60px;height:60px}.name[_ngcontent-%COMP%]{white-space:nowrap}.alias[_ngcontent-%COMP%]{font-size:24px}.alias[_ngcontent-%COMP%], .fullname[_ngcontent-%COMP%]{white-space:nowrap;float:left}.fullname[_ngcontent-%COMP%]{margin-left:20px;opacity:.5}.about[_ngcontent-%COMP%]{clear:both;padding-top:30px;padding-right:20px}.details[_ngcontent-%COMP%]{overflow:hidden;background:#2d2b2b;color:#fff;padding-left:20px;font-size:20px;padding-top:60px;z-index:0;padding-bottom:50px;margin-top:-60px;margin-bottom:42px;color:#6d95ce;z-index:11;background:#151b2e;background:linear-gradient(90deg,#151b2e,rgba(16,22,41,.5882352941176471))}.editButton[_ngcontent-%COMP%]{font-size:20px;z-index:1;float:right;margin-right:20px;margin-top:-15px}.discardButton[_ngcontent-%COMP%], .saveButton[_ngcontent-%COMP%]{font-size:20px;z-index:1;float:right;margin-right:23px}.fundButton[_ngcontent-%COMP%]{background:#bfbf13!important;font-size:16px!important}.profilePrivacy[_ngcontent-%COMP%]{position:absolute;font-size:19px;right:22px;background:#eed864;font-weight:700;border-radius:4px;color:rgba(39,105,247,.7803921568627451);font-family:Ubuntu;line-height:30px;padding:3px 10px;cursor:pointer;top:20px}.profilePrivacy[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:24px;opacity:.7;position:relative;top:2px}@media only screen and (max-width:600px){.fullname[_ngcontent-%COMP%]{clear:both;margin-left:0}}input[_ngcontent-%COMP%]{caret-color:#fff}.pubKeyDisplay[_ngcontent-%COMP%]{left:99px;right:8px;line-height:7px;font-size:7px;font-family:MONOSPACE;word-break:break-all;overflow:hidden;color:rgba(211,166,65,.25098039215686274)!important;z-index:9999;top:-45px;cursor:pointer;margin-top:-53px;margin-bottom:23px;margin-left:78px}@media only screen and (max-width:807px){.pubKeyDisplay[_ngcontent-%COMP%]{max-height:20px;text-overflow:ellipsis;line-height:10px;font-size:10px;font-family:MONOSPACE;word-break:break-all;overflow:hidden}.editButton[_ngcontent-%COMP%]{margin-top:-9px}}.starButton[_ngcontent-%COMP%]{color:rgba(42,68,120,.5098039215686274);border:0 solid transparent!important}.starButton[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:2.5rem}.starButton[_ngcontent-%COMP%]:hover{color:rgba(37,109,255,.5607843137254902)}.starButton.active[_ngcontent-%COMP%]{color:#256dff;border:0 solid transparent!important;font-size:2.5rem}.starButton.active[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:2rem}.starButton.pending[_ngcontent-%COMP%]{color:#256dff;border:0 solid transparent!important;font-size:2.5rem}.search[_ngcontent-%COMP%]{z-index:2;right:0;left:0;padding:20px;height:95px;bottom:28px;position:absolute;top:0}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:Ubuntu;position:absolute;letter-spacing:1px;color:rgba(241,237,205,.8196078431372549);padding:10px 10px 10px 26px;font-size:16px;left:5%;width:90%;font-weight:500!important}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:1px solid red}.search[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:1.75rem}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:rgba(41,104,245,.8313725490196079)}.pp[_ngcontent-%COMP%]{z-index:12}.fundUs[_ngcontent-%COMP%]{z-index:2;width:100%;margin-bottom:120px;text-align:center;margin-top:38px}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;height:40px;width:40px;border:0;color:#7b9cc3;padding-right:8px;width:50px;position:absolute;top:19px;right:5%}.search[_ngcontent-%COMP%]   .searchButton[_ngcontent-%COMP%]:focus, .search[_ngcontent-%COMP%]   .searchButtonWrapper[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]   .searchButtonWrapper[_ngcontent-%COMP%]:focus{outline:none!important;border:0!important;box-shadow:none!important}.results[_ngcontent-%COMP%]{background:linear-gradient(90deg,#151b2e,rgba(16,22,41,.59));font-family:Ubuntu;overflow:hidden;overflow-y:auto;position:absolute;left:0;right:0;bottom:27px;top:0}.resultCardWrapper[_ngcontent-%COMP%]{padding:20px 4% 20px 5%}.resultCardWrapper[_ngcontent-%COMP%]:first-child{padding-top:60px;padding-bottom:20px}.resultCardWrapper[_ngcontent-%COMP%]:last-child{padding-bottom:120px}.searchResultAlias[_ngcontent-%COMP%]{font-size:18px}.searchResultPp[_ngcontent-%COMP%], .searchResultPpImg[_ngcontent-%COMP%]{height:100px}.searchResultColumn[_ngcontent-%COMP%]{color:#4f84e2;padding:10px 10px 10px 20px}.searchResultConnection.topCorner[_ngcontent-%COMP%]{display:none;color:#4f84e2;margin-top:7px}.searchResultAboutWrapper[_ngcontent-%COMP%]{width:100%}.resultCard[_ngcontent-%COMP%]{border-radius:5px;flex-direction:row;box-sizing:border-box;display:flex;background:linear-gradient(90deg,#151b2e,rgba(16,22,41,.5882352941176471));background:linear-gradient(90deg,#192752,rgba(16,22,41,.5882352941176471));overflow:hidden;cursor:pointer;border:1px solid transparent}.resultCard[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#151b2e,rgba(16,22,41,.5882352941176471));overflow:hidden;border:1px solid red}.searchResultFullName[_ngcontent-%COMP%]{color:rgba(79,132,226,.5411764705882353)}@media only screen and (max-width:816px){.searchResultColumn[_ngcontent-%COMP%]{padding-left:10px}.searchResultConnection.searchResultColumn[_ngcontent-%COMP%]{display:none}.searchResultConnection.topCorner[_ngcontent-%COMP%]{display:block}.resultCard[_ngcontent-%COMP%]{flex-flow:row wrap}}.postButton[_ngcontent-%COMP%]{color:rgba(198,196,137,.7803921568627451);font-family:Ubuntu;font-size:16px;margin-top:4vh;border:2px solid rgba(157,175,170,.7490196078431373)}.postDelete[_ngcontent-%COMP%]{float:right;color:rgba(255,0,0,.8117647058823529);margin-left:10px;font-size:20px;position:relative;top:-1px;cursor:pointer}.postTime[_ngcontent-%COMP%]{float:right;color:#452781}.newPostContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-moz-placeholder{color:#ff0045}.newPostContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:-ms-input-placeholder{color:#ff0045}.newPostContainer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#ff0045}.mat-input-element[_ngcontent-%COMP%]{caret-color:#546184;text-align:left;border:1px solid transparent;border-radius:5px;padding:10px}.mat-input-element[_ngcontent-%COMP%]:focus{border:1px solid red}.mat-input-element[_ngcontent-%COMP%]::-moz-placeholder:focus{display:none}.mat-input-element[_ngcontent-%COMP%]:-ms-input-placeholder:focus{display:none}.mat-input-element[_ngcontent-%COMP%]::placeholder:focus{display:none}.emojiPickerTrigger[_ngcontent-%COMP%]{opacity:1;z-index:9;padding:8px;margin-right:10px;cursor:pointer;right:0;position:relative;top:3px}.emojiPicker[_ngcontent-%COMP%]{z-index:222222!important;position:relative;right:70px;background:transparent}  nb-popover{background:transparent!important}@media only screen and (max-width:616px){.newPostContainer[_ngcontent-%COMP%], .postContainer[_ngcontent-%COMP%]{margin-left:0;margin-right:0!important;margin-top:0;border:0!important;margin-bottom:15px;border-radius:0;border-top:1px solid #40389e!important;border-bottom:1px solid #423193!important;width:100vw}.postContainer[_ngcontent-%COMP%]:last-child{margin-bottom:40px}}.emojiPicker[_ngcontent-%COMP%]{right:60px}@media only screen and (min-width:420px) and (max-width:480px){.emojiPicker[_ngcontent-%COMP%]{right:-40px}}@media only screen and (min-width:480px) and (max-width:900px){.emojiPicker[_ngcontent-%COMP%]{right:0}}.newPostContainer[_ngcontent-%COMP%], .postContainer[_ngcontent-%COMP%]{background:rgba(30,36,55,.788235294117647);margin-left:5vw;border-radius:10px;padding:40px;opacity:.9;font-family:Ubuntu;font-size:22px;color:#4680e9;margin-right:5vw;text-align:right;margin-bottom:5vh;border:1px solid rgba(255,0,0,.25882352941176473);display:block}.postContainer[_ngcontent-%COMP%]{text-align:left;border:1px solid rgba(45,99,236,.6509803921568628);border-radius:0;margin-top:-56px}.postContainer.level-0[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;margin-top:0}.postOuterWrapper[_ngcontent-%COMP%]:last-child   .postContainer[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px;margin-top:-56px}.postContainer.reply[_ngcontent-%COMP%]{border-left:8px solid;border-right:8px solid;border-top:1px solid;position:relative;margin:-17px 6vw 0;top:22px}.postContainer.singleLevel[_ngcontent-%COMP%]{margin-top:40px!important;margin-bottom:20px;border-radius:10px!important}.postContainer.singleLevel.replyPost[_ngcontent-%COMP%]{margin-top:0!important;border-radius:10px!important}.replyLoop[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .postContainer[_ngcontent-%COMP%]{border-radius:0;border-bottom-left-radius:10px;border-bottom-right-radius:10px}.replyLoop[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%] > .postContainer[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;margin-top:30px}.replyLoop[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%] > .postContainer[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px}.combinedTimeline[_ngcontent-%COMP%]:nth-child(2){margin-top:120px}.repliesHeader[_ngcontent-%COMP%]{margin:20px;text-align:center}.repliesIcon[_ngcontent-%COMP%]{color:#7d9dc3;font-size:26px;margin:40px 20px 20px}.syncingButton.false[_ngcontent-%COMP%]{margin-top:0}.replyOuterWrapper[_ngcontent-%COMP%]:last-child{margin-bottom:120px}.postViewer[_ngcontent-%COMP%]{position:absolute;left:0;top:20px;right:0;bottom:77px;overflow:hidden;padding-top:22px;overflow-y:auto}.postViewer[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.postViewer[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:rgba(78,132,229,.5607843137254902)}.postViewer[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:rgba(78,132,229,.5607843137254902);outline:0}"],changeDetection:0}),t})()}]}];let oe=(()=>{class t{}return t.\u0275mod=r.Qb({type:t}),t.\u0275inj=r.Pb({factory:function(e){return new(e||t)},imports:[[o.g.forChild(ne)],o.g]}),t})();var ie=n("UXJo"),re=n("kmnG"),ce=n("5RNC"),se=n("Wp6s"),ae=n("d3UM"),le=n("bSwM"),pe=n("STbY"),de=n("8yBR"),ge=n("YUcS"),ue=n("6NWb"),he=n("5+WD"),be=n("f6nW"),fe=n("FvrZ"),me=n("tk/3"),Ce=n("NFeN"),xe=n("tR1z");let Pe=(()=>{class t{}return t.\u0275mod=r.Qb({type:t,bootstrap:[x]}),t.\u0275inj=r.Pb({factory:function(e){return new(e||t)},providers:[c.l],imports:[[c.C,be.p,fe.d,c.x,ie.b,me.b,se.a,ae.b,l.b,le.a,pe.c,a.c,oe,ue.a,c.J,c.v,c.h,c.I,xe.a,c.q,c.n,y.f,c.j,c.k.forRoot(),c.g,de.d,he.c,l.b,le.a,k.b,re.d,_.b,ce.a,ge.a,Ce.b,S.a,w.b,F.b,c.A],be.p,re.d,ae.b,de.d,pe.c]}),t})()},ZREu:function(t){t.exports=JSON.parse('{"dev":false}')},zVjI:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return Q}));var o=n("n2fA"),i=n("FQBZ"),r=n("ZREu"),c=n("2Vo4"),s=n("0EQZ"),a=n("FvrZ"),l=n("8yBR"),p=n("STbY"),d=n("fXoL"),g=n("tyNb"),u=n("Witw"),h=n("aceb"),b=n("gvxT"),f=n("kmnG"),m=n("qFsG"),C=n("ofXK"),x=n("d3UM"),P=n("3Pt+"),v=n("bTqV"),O=n("FKr1"),M=n("IyRd"),y=n("znSr"),_=n("NFeN");const k=["emptyItem"],w=["qrPop"],F=["createPop"],S=["newFavoriteFolder"];function j(t,e){if(1&t&&(d.Yb(0,"mat-option",24),d.Ic(1),d.Xb()),2&t){const t=e.$implicit;d.pc("value",t.id),d.Fb(1),d.Kc(" ",t.data.name," ")}}function B(t,e){if(1&t){const t=d.Zb();d.Yb(0,"nb-card"),d.Yb(1,"nb-card-header"),d.Ic(2,"Create Channel"),d.Xb(),d.Yb(3,"nb-card-body",16),d.Yb(4,"div",17),d.Ic(5," Folder: "),d.Yb(6,"mat-select",18),d.fc("valueChange",(function(e){return d.xc(t),d.jc().newChannelFolder=e}))("selectionChange",(function(e){return d.xc(t),d.jc().newChannelFolderChanged(e.value)})),d.Gc(7,j,2,2,"mat-option",19),d.Xb(),d.Xb(),d.Yb(8,"div",20),d.Yb(9,"input",21),d.fc("ngModelChange",(function(e){return d.xc(t),d.jc().newChannelName=e})),d.Xb(),d.Xb(),d.Xb(),d.Yb(10,"nb-card-footer"),d.Yb(11,"button",22),d.fc("click",(function(){d.xc(t);const e=d.jc();return e.createNewChannel(e.newChannelName)})),d.Ic(12,"Create"),d.Xb(),d.Yb(13,"button",23),d.fc("click",(function(){return d.xc(t),d.jc().closePopup()})),d.Ic(14,"Cancel"),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.jc();d.Fb(6),d.pc("value",t.newChannelFolder),d.Fb(1),d.pc("ngForOf",t.channelFolderListArray),d.Fb(2),d.pc("ngModel",t.newChannelName)}}function I(t,e){if(1&t){const t=d.Zb();d.Yb(0,"nb-card"),d.Yb(1,"nb-card-header"),d.Ic(2,"Scan QR"),d.Xb(),d.Yb(3,"nb-card-body",16),d.Yb(4,"div",25),d.Yb(5,"zxing-scanner",26),d.fc("deviceChange",(function(e){return d.xc(t),d.jc().currentDevice=e}))("scanSuccess",(function(e){return d.xc(t),d.jc().qrSuccessHandler(e)}))("permissionResponse",(function(e){return d.xc(t),d.jc().onHasPermission(e)}))("camerasFound",(function(e){return d.xc(t),d.jc().onCamerasFound(e)}))("torchCompatible",(function(e){return d.xc(t),d.jc().onTorchCompatible(e)})),d.Xb(),d.Xb(),d.Xb(),d.Yb(6,"nb-card-footer"),d.Yb(7,"button",23),d.fc("click",(function(){return d.xc(t),d.jc().closeQR()})),d.Ic(8,"Cancel"),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.jc();d.Fb(5),d.pc("torch",t.torchEnabled)("device",t.currentDevice)("formats",t.formatsEnabled)("tryHarder",t.tryHarder)}}function z(t,e){if(1&t&&(d.Yb(0,"mat-option",24),d.Ic(1),d.Xb()),2&t){const t=e.$implicit;d.pc("value",t.id),d.Fb(1),d.Kc(" ",t.data.name," ")}}function T(t,e){if(1&t){const t=d.Zb();d.Yb(0,"nb-card"),d.Yb(1,"nb-card-header"),d.Ic(2,"Join Channel"),d.Xb(),d.Yb(3,"nb-card-body",16),d.Yb(4,"div",17),d.Ic(5," Import Folder Structure: "),d.Yb(6,"mat-form-field",27),d.Yb(7,"mat-select",28),d.fc("valueChange",(function(e){return d.xc(t),d.jc().importFolderStructure=e}))("selectionChange",(function(e){return d.xc(t),d.jc().newInviteImportFoldersChanged(e.value)})),d.Yb(8,"mat-option",24),d.Ic(9," On "),d.Xb(),d.Yb(10,"mat-option",24),d.Ic(11," Off "),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(12,"div",17),d.Ic(13," Place Into Folder: "),d.Yb(14,"mat-select",18),d.fc("valueChange",(function(e){return d.xc(t),d.jc().newChannelFolder=e}))("selectionChange",(function(e){return d.xc(t),d.jc().newChannelFolderChanged(e.value)})),d.Gc(15,z,2,2,"mat-option",19),d.Xb(),d.Xb(),d.Yb(16,"div",20),d.Yb(17,"input",29),d.fc("ngModelChange",(function(e){return d.xc(t),d.jc().inviteCodeHex=e})),d.Xb(),d.Yb(18,"nb-icon",30),d.fc("click",(function(){return d.xc(t),d.jc().scanQR()})),d.Xb(),d.Xb(),d.Xb(),d.Yb(19,"nb-card-footer"),d.Yb(20,"button",22),d.fc("click",(function(){d.xc(t);const e=d.jc();return e.importNewChannel(e.inviteCode)})),d.Ic(21,"Join"),d.Xb(),d.Yb(22,"button",23),d.fc("click",(function(){return d.xc(t),d.jc().closePopup()})),d.Ic(23,"Cancel"),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.jc();d.Fb(7),d.pc("value",t.importFolderStructure),d.Fb(1),d.pc("value",1),d.Fb(2),d.pc("value",0),d.Fb(4),d.pc("value",t.newChannelFolder),d.Fb(1),d.pc("ngForOf",t.channelFolderListArray),d.Fb(2),d.pc("ngModel",t.inviteCodeHex)}}function q(t,e){if(1&t&&(d.Yb(0,"mat-option",24),d.Ic(1),d.Xb()),2&t){const t=e.$implicit;d.pc("value",t.id),d.Fb(1),d.Kc(" ",t.data.name," ")}}function N(t,e){if(1&t){const t=d.Zb();d.Yb(0,"nb-card"),d.Yb(1,"nb-card-header"),d.Ic(2,"New Favorite Folder"),d.Xb(),d.Yb(3,"nb-card-body",16),d.Yb(4,"div",17),d.Ic(5," Folder: "),d.Yb(6,"mat-select",18),d.fc("valueChange",(function(e){return d.xc(t),d.jc().newFavoriteFolderId=e}))("selectionChange",(function(e){return d.xc(t),d.jc().newFavoriteFolderChanged(e.value)})),d.Gc(7,q,2,2,"mat-option",19),d.Xb(),d.Xb(),d.Yb(8,"div",20),d.Yb(9,"input",31),d.fc("ngModelChange",(function(e){return d.xc(t),d.jc().newFavoriteFolderName=e})),d.Xb(),d.Xb(),d.Xb(),d.Yb(10,"nb-card-footer"),d.Yb(11,"button",22),d.fc("click",(function(){d.xc(t);const e=d.jc();return e.createNewFavoriteFolder(e.newFavoriteFolderName)})),d.Ic(12,"Create"),d.Xb(),d.Yb(13,"button",23),d.fc("click",(function(){return d.xc(t),d.jc().closePopup()})),d.Ic(14,"Cancel"),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.jc();d.Fb(6),d.pc("value",t.newFavoriteFolderId),d.Fb(1),d.pc("ngForOf",t.favoriteFolderListArray),d.Fb(2),d.pc("ngModel",t.newFavoriteFolderName)}}function R(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",36),d.fc("click",(function(){d.xc(t);const e=d.jc().$implicit;return d.jc().goToProfile(e.pubKey)})),d.Ic(1),d.Xb()}if(2&t){const t=d.jc().$implicit,e=d.jc();d.Fb(1),d.Kc(" ",e.getAliasFromDirectChannel(t.channel),"")}}function Y(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",36),d.fc("click",(function(){d.xc(t);const e=d.jc().$implicit;return d.jc().goToProfile(e.pubKey)})),d.Ic(1," Unknown"),d.Xb()}}function X(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",32),d.Gc(1,R,2,1,"div",33),d.Gc(2,Y,2,0,"div",33),d.Yb(3,"nb-icon",34),d.fc("click",(function(){d.xc(t);const n=e.$implicit;return d.jc().rejectRequest(n.pubKey)})),d.Xb(),d.Yb(4,"nb-icon",35),d.fc("click",(function(){d.xc(t);const n=e.$implicit;return d.jc().importNewChannel(n.invite)})),d.Xb(),d.Xb()}if(2&t){const t=e.$implicit,n=d.jc();d.Fb(1),d.pc("ngIf",n.getAliasFromDirectChannel(t.channel).indexOf("qprivatedch")<0),d.Fb(1),d.pc("ngIf",n.getAliasFromDirectChannel(t.channel).indexOf("qprivatedch")>-1)}}const A=function(t){return[t]},L=function(){return["active-channel"]},D=function(t){return{"drag-start":t}};function E(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",40),d.fc("click",(function(){d.xc(t);const e=d.jc().$implicit;return d.jc().goToProfileByChannel(e.item)})),d.Tb(1,"nb-icon",41),d.Yb(2,"span",42),d.fc("dragstart",(function(e){d.xc(t);const n=d.jc().$implicit;return d.jc().handleDragStart(e,n)})),d.Yb(3,"span",43),d.Ic(4),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.jc().$implicit,e=d.jc();d.Ib("treeNodeContainerSingle ",t.item,""),d.pc("routerLink",d.sc(7,A,"/social/profile/"+e.pk[t.item]))("routerLinkActive",d.rc(9,L)),d.Fb(3),d.pc("ngClass",d.sc(10,D,e.dragNode===t)),d.Fb(1),d.Kc(" ",e.getAliasFromDirectChannel2(t.item)," ")}}function K(t,e){if(1&t){const t=d.Zb();d.Yb(0,"div",44),d.fc("click",(function(){d.xc(t);const e=d.jc().$implicit;return d.jc().goToChannel(e.item)})),d.Tb(1,"nb-icon",45),d.Yb(2,"span",42),d.fc("dragstart",(function(e){d.xc(t);const n=d.jc().$implicit;return d.jc().handleDragStart(e,n)})),d.Yb(3,"span",46),d.Ic(4," Unknown "),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=d.jc().$implicit,e=d.jc();d.Ib("treeNodeContainerSingle ",t.item,""),d.Fb(3),d.pc("ngClass",d.sc(4,D,e.dragNode===t))}}function V(t,e){if(1&t){const t=d.Zb();d.Yb(0,"mat-tree-node",37),d.fc("dragover",(function(n){d.xc(t);const o=e.$implicit;return d.jc().handleDragOver(n,o)}))("dragend",(function(e){return d.xc(t),d.jc().handleDragEnd(e)}))("drop",(function(n){d.xc(t);const o=e.$implicit;return d.jc().handleDrop(n,o)})),d.Gc(1,E,5,12,"div",38),d.Gc(2,K,5,6,"div",39),d.Xb()}if(2&t){const t=e.$implicit,n=d.jc();d.pc("ngClass",n.getStyle(t)),d.Fb(1),d.pc("ngIf",n.getAliasFromDirectChannel2(t.item).indexOf("qprivatedch")<0),d.Fb(1),d.pc("ngIf",n.getAliasFromDirectChannel2(t.item).indexOf("qprivatedch")>-1)}}function G(t,e){if(1&t){const t=d.Zb();d.Yb(0,"mat-tree-node",47),d.fc("dragover",(function(n){d.xc(t);const o=e.$implicit;return d.jc().handleDragOver(n,o)}))("dragend",(function(n){d.xc(t);const o=e.$implicit;return d.jc().handleDragEnd(n,o)}))("drop",(function(n){d.xc(t);const o=e.$implicit;return d.jc().handleDrop(n,o)})),d.Yb(1,"div",48),d.fc("contextmenu",(function(n){d.xc(t);const o=e.$implicit;return d.jc().onContextMenu(n,o.item)})),d.Yb(2,"button",49),d.Yb(3,"mat-icon",50),d.Ic(4),d.Xb(),d.Xb(),d.Tb(5,"nb-icon",51),d.Yb(6,"span",42),d.fc("dragstart",(function(n){d.xc(t);const o=e.$implicit;return d.jc().handleDragStart(n,o)})),d.Yb(7,"span",52),d.Ic(8),d.Xb(),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=e.$implicit,n=d.jc();d.pc("ngClass",n.getStyle(t)),d.Fb(2),d.Gb("aria-label","toggle "+t.item),d.Fb(2),d.Kc(" ",n.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),d.Fb(3),d.pc("ngClass",d.sc(5,D,n.dragNode===t)),d.Fb(1),d.Kc(" ",n.getFavoriteFolderNameFromId(t.item)," ")}}function H(t,e){if(1&t){const t=d.Zb();d.Yb(0,"button",53),d.fc("click",(function(){d.xc(t);const n=e.item;return d.jc().deleteFolder(n)})),d.Ic(1,"Delete"),d.Xb(),d.Yb(2,"button",53),d.fc("click",(function(){d.xc(t);const n=e.item;return d.jc().onContextMenuAction2(n)})),d.Ic(3,"Rename"),d.Xb()}}class W{}class Z{}var U={};let $=(()=>{class t{constructor(){this.dataChange=new c.a([]),this.initialize()}get data(){return this.dataChange.value}initialize(){this.buildFileTree(U,0)}buildFileTree(t,e){return Object.keys(t).reduce((n,o)=>{const i=t[o],r=new W;return r.item=o,null!=i&&("object"==typeof i?r.children=this.buildFileTree(i,e+1):r.item=i),n.concat(r)},[])}insertItem(t,e){t.children||(t.children=[]);const n={item:e};return t.children.push(n),this.dataChange.next(this.data),n}getParentFromNodes(t){for(let e=0;e<this.data.length;++e){const n=this.getParent(this.data[e],t);if(null!=n)return n}return null}getParent(t,e){if(t.children&&t.children.length>0)for(let n=0;n<t.children.length;++n){const o=t.children[n];if(o===e)return t;if(o.children&&o.children.length>0){const t=this.getParent(o,e);if(null!=t)return t}}return null}updateItem(t,e){t.item=e,this.dataChange.next(this.data)}deleteItem(t){this.deleteNode(this.data,t),this.dataChange.next(this.data)}copyPasteItem(t,e){const n=this.insertItem(e,t.item);return t.children&&t.children.forEach(t=>{this.copyPasteItem(t,n)}),n}deleteNode(t,e){const n=t.indexOf(e,0);n>-1?t.splice(n,1):t.forEach(t=>{t.children&&t.children.length>0&&this.deleteNode(t.children,e)})}filter(t){let e;e=t&&t.length>0?{Filter:{emptyFolder:{}},Function:{emptyFolder:{}},Missing:{emptyFolder:{}}}:U;const n=this.buildFileTree(e,0);this.dataChange.next(n)}setQOS(t){this.q=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=d.Ob({token:t,factory:t.\u0275fac}),t})(),Q=(()=>{class e{constructor(t,e,n,o,p,d,g,u){this.router=t,this.ngZone=e,this.cd=n,this.database=o,this.ui=p,this.dialog=d,this.nbMenuService=g,this.q=u,this.contextMenuPosition={x:"0px",y:"0px"},this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.newItemName="",this.checklistSelection=new s.c(!0),this.dragNodeExpandOverWaitTimeMs=300,this.getLevel=t=>t.level,this.isExpandable=t=>t.expandable,this.getChildren=t=>t.children,this.hasChild=(t,e)=>e.expandable,this.hasNoContent=(t,e)=>""===e.item,this.transformer=(t,e)=>{const n=this.nestedNodeMap.get(t),o=n&&n.item===t.item?n:new Z;return o.item=t.item,o.level=e,o.expandable=t.children&&t.children.length>0,this.flatNodeMap.set(o,t),this.nestedNodeMap.set(t,o),o},this.dragNodeExpandOverAreaReal=0,this.channelNameList=[],this.incomingFavoriteRequestList=[],this.restoreFlag=0,this.sENwriteBlock=0,this.channelIsSelected="active-channel",this.DEVMODE=r.dev,this.customColumn="name",this.items=[{title:"New Favorite Folder"},{title:"Add Favorite"}],this.currentDevice=null,this.formatsEnabled=[i.BarcodeFormat.QR_CODE],this.torchEnabled=!1,this.torchAvailable$=new c.a(!1),this.tryHarder=!1,this.favoriteFolderListArray=[],this.popupRef=[],this.flatChannelNameList={},this.flatChannelNameList2={},this.flatChannelNeeded=[],this.flatChannelNeeded2=[],this.pubKeyStore={},this.pk={},this.itemClickSub=this.nbMenuService.onItemClick().subscribe(t=>{"New Favorite Folder"==String(t.item.title)&&(this.getFavoriteFolderList(),this.open(this.newFavoriteFolderPop))}),this.database.setQOS(this.q),this.treeFlattener=new l.c(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new a.j(this.getLevel,this.isExpandable),this.dataSource=new l.b(this.treeControl,this.treeFlattener)}onContextMenu(t,e){t.preventDefault(),this.contextMenuPosition.x=t.clientX+"px",this.contextMenuPosition.y=t.clientY-40+"px",this.contextMenu.menuData={item:e},this.contextMenu.openMenu()}onContextMenuAction1(t){}onContextMenuAction2(t){}descendantsAllSelected(t){return this.treeControl.getDescendants(t).every(t=>this.checklistSelection.isSelected(t))}descendantsPartiallySelected(t){return this.treeControl.getDescendants(t).some(t=>this.checklistSelection.isSelected(t))&&!this.descendantsAllSelected(t)}todoItemSelectionToggle(t){this.checklistSelection.toggle(t);const e=this.treeControl.getDescendants(t);this.checklistSelection.isSelected(t)?this.checklistSelection.select(...e):this.checklistSelection.deselect(...e)}saveNode(t,e){const n=this.flatNodeMap.get(t);this.database.updateItem(n,e)}handleDragStart(t,e){this.dragNode=e,this.treeControl.collapse(e)}handleDragOver(t,e){if(t.preventDefault(),-1===e.item.indexOf("-----")){this.dragNodeExpandOverNode&&e===this.dragNodeExpandOverNode?Date.now()-this.dragNodeExpandOverTime>this.dragNodeExpandOverWaitTimeMs&&(this.treeControl.isExpanded(e)||this.treeControl.expand(e)):(this.dragNodeExpandOverNode=e,this.dragNodeExpandOverTime=(new Date).getTime());const n=t.offsetY/t.target.clientHeight;0<=n&&n<=.25?(this.dragNodeExpandOverArea=0,this.dragNodeExpandOverAreaReal=1):1>=n&&n>=.75?(this.dragNodeExpandOverArea=0,this.dragNodeExpandOverAreaReal=-1):(this.dragNodeExpandOverAreaReal=0,this.dragNodeExpandOverArea=0)}}handleDrop(t,e){if(e!==this.dragNode&&e.item.indexOf("-----")<0){let t;1===this.dragNodeExpandOverAreaReal||-1===this.dragNodeExpandOverAreaReal||(t=this.flatNodeMap.get(this.dragNode),this.database.deleteItem(t),t=this.database.copyPasteItem(t,this.flatNodeMap.get(e)),this.saveExpandedNodes(),this.buildFavoriteFolderListFromTreeNodeData())}this.handleDragEnd(t)}handleDragEnd(t){this.dragNode=null,this.dragNodeExpandOverNode=null,this.dragNodeExpandOverTime=0,this.dragNodeExpandOverArea=NaN,t.preventDefault()}getStyle(t){if("emptyFolder"==t.item)return"display-none";if(this.dragNode===t)return"drag-start";if(this.dragNodeExpandOverNode===t)switch(this.dragNodeExpandOverArea){case 1:return"drop-above";case-1:return"drop-below";default:return"drop-center"}}closeQR(){setTimeout(()=>{this.closePopup()},500)}scanQR(){this.open(this.qrPop)}deleteItem(t){this.database.deleteItem(this.flatNodeMap.get(t))}filterChanged(t){this.database.filter(t),t?this.treeControl.expandAll():this.treeControl.collapseAll()}getFavoriteFolderNameFromId(t){return"emptyFolder"==t?t:this.q.os.bee.config.getFavoriteFolderNameFromId(t)}isFolder(t){return!(t.indexOf("-----")>-1)}buildFavoritelFolderListFromTreeNodeData(){console.log("!!!!!"),console.log(this.database.data);let t=this.database.data;t=t.filter(t=>"emptyFolder"!=t.item);let e=[];for(let n=0;n<t.length;n++){console.log(t[n]);let o="dir";t[n].item.indexOf("-----")>-1&&(o="channel"),console.log(o);let i=[];void 0!==t[n].children&&t[n].children.length>0&&(i=this.getFavoriteFolderListTreeChildrenRec(t[n].children)),e.push({id:t[n].item,data:{name:this.q.os.bee.config.getFavoriteFolderNameFromId(t[n].item),kind:o,items:0},children:i})}return this.q.os.bee.config.setFavoriteFolderList(e),!0}ngOnDestroy(){console.log("ChannelList: ngOnDestroy..."),clearInterval(this.updateNamesInterval),this.itemClickSub.unsubscribe(),this.dataChangeSub.unsubscribe(),this.favoriteFolderListSub.unsubscribe()}ngOnInit(){this.updateNamesInterval=setInterval(()=>{this.saveExpandedNodes(),this.loadChannels(this.favoriteFolderList)},1e4),this.favoriteFolderList=this.q.os.bee.config.getFavoriteFolderList(),this.dataChangeSub=this.database.dataChange.subscribe(t=>{this.dataSource.data=[],this.dataSource.data=t}),this.favoriteFolderListSub=this.q.os.bee.config.favoriteFolderListSub.subscribe(t=>{this.loadChannels(t)}),this.loadChannels(this.favoriteFolderList)}loadChannels(t){this.incomingFavoriteRequestList=this.q.os.ocean.dolphin.getIncomingFavoriteRequests().filter(t=>!this.q.os.utilities.inArray(this.q.os.ocean.dolphin.getChannelNameList(),t.channel)),U=this.q.os.bee.config.getFavoriteFolderIDList(),this.database.filter(""),t.length>0&&this.q.os.bee.config.getExpandedFavoriteFolderItems().length>0&&(console.log("got a saved state!"),this.expandedNodes=this.q.os.bee.config.getExpandedFavoriteFolderItems(),this.restoreExpandedNodes()),this.updateNames()}saveExpandedNodes(){this.sENwriteBlock=1,this.expandedNodes=[];for(let t=0;t<this.treeControl.dataNodes.length;t++){let e=this.treeControl.dataNodes[t];e.expandable&&this.treeControl.isExpanded(e)&&this.expandedNodes.push(e)}return console.log("ChannelList: Persisting expanded folders..."),this.q.os.bee.config.setExpandedFavoriteFolderItems(this.expandedNodes),this.sENwriteBlock=0,!0}buildFavoriteFolderListFromTreeNodeData(){console.log("!!!!!"),console.log(this.database.data);let t=this.database.data;t=t.filter(t=>"emptyFolder"!=t.item);let e=[];for(let n=0;n<t.length;n++){console.log(t[n]);let o="dir";t[n].item.indexOf("-----")>-1&&(o="channel"),console.log(o);let i=[];void 0!==t[n].children&&t[n].children.length>0&&(i=this.getFavoriteFolderListTreeChildrenRec(t[n].children)),e.push({id:t[n].item,data:{name:this.q.os.bee.config.getFavoriteFolderNameFromId(t[n].item),kind:o,items:0},children:i})}return this.q.os.bee.config.setFavoriteFolderList(e),!0}selectChannel(t){console.log("ChannelList: Trying to select: >>"+t.trim()),this.q.os.utilities.inArray(this.q.os.ocean.dolphin.getChannelNameList(),t.trim())&&(console.log("ChannelList: Selecting: ",t.trim()),this.q.os.channel.select(t.trim()),this.q.os.ui.getSideBarFixed().left&&this.q.os.ui.hideSideBar("left"),this.cd.detectChanges())}getSelected(){return JSON.stringify(this.selectedChannel)}getFavoriteFolderListTreeChildrenRec(t){let e=[];for(let n=0;n<t.length;n++){console.log(t[n]);let o="dir";t[n].item.indexOf("-----")>-1&&(o="channel");let i=[];void 0!==t[n].children&&t[n].children.length>0&&(i=this.getFavoriteFolderListTreeChildrenRec(t[n].children)),e.push({id:t[n].item,data:{name:this.q.os.bee.config.getFavoriteFolderNameFromId(t[n].item),kind:o,items:0},children:i})}return e}restoreExpandedNodes(){this.sENwriteBlock=1;for(let t=0;t<this.expandedNodes.length;t++){let e=this.expandedNodes[t];console.log(e),console.log(this.treeControl.dataNodes),this.treeControl.expand(this.treeControl.dataNodes.find(t=>t.item===e.item))}this.sENwriteBlock=0}onCamerasFound(t){this.availableDevices=t,this.hasDevices=Boolean(t&&t.length)}onDeviceSelectChange(t){const e=this.availableDevices.find(e=>e.deviceId===t);this.currentDevice=e||null}onHasPermission(t){this.hasPermission=t}onTorchCompatible(t){this.torchAvailable$.next(t||!1)}toggleTorch(){this.torchEnabled=!this.torchEnabled}toggleTryHarder(){this.tryHarder=!this.tryHarder}qrSuccessHandler(t){console.log(t),this.inviteCodeHex=t,this.closePopup()}getFavoriteFolderList(){return this.favoriteFolderList=this.q.os.bee.config.getFavoriteFolderList(),this.favoriteFolderListArray=[],this.parseStructure(this.favoriteFolderList),this.favoriteFolderListArray.length>0&&(this.newFavoriteFolder=this.favoriteFolderListArray[0]),this.favoriteFolderList}parseStructure(t){for(let e=0;e<t.length;e++)-1===t[e].data.name.indexOf("-----")&&"emptyFolder"!=t[e].data.name&&(this.favoriteFolderListArray.push(t[e]),void 0!==t[e].children&&this.parseStructure(t[e].children));return t}newChannelFolderChanged(){}createNewChannel(t){return Object(o.a)(this,void 0,void 0,(function*(){}))}open(t){this.popupRef.push(this.dialog.open(t,{context:"this is some additional data passed to dialog"}))}closePopup(){console.log("close toggled"),this.popupRef[this.popupRef.length-1].close(),this.popupRef.pop()}createCompleteAndClose(){this.ui.delay(1e3),this.q.os.bee.config.commit(),this.ui.showSnack("Success!","Yesss",{duration:1e3}),this.closePopup()}createNewFavoriteFolder(t){this.saveExpandedNodes(),this.ui.showSnack("Creating Folder...","Please Wait");let e=this.newFavoriteFolderId;"object"==typeof e&&(e=""),this.q.os.bee.config.createFavoriteFolder(t,e),this.createCompleteAndClose()}deleteFolder(t){console.log("Deleting Folder..."),console.log(t);let e=this.q.os.bee.config.checkIfFavoriteFolderIdChannels(t);console.log(e),e?this.ui.showSnack("Folder has channels!","Sorry but no.",{duration:5e3}):(this.ui.showSnack("Deleting Folder...","Please Wait"),this.saveExpandedNodes(),this.q.os.bee.config.deleteFavoriteFolder(t),this.createCompleteAndClose())}importChannelFolderChanged(){}importNewChannel(e="NoInviteSelected"){return Object(o.a)(this,void 0,void 0,(function*(){this.saveExpandedNodes(),this.ui.showSnack("Importing Channel...","Please Wait"),"NoInviteSelected"==e&&(e=this.inviteCodeHex);let n,o,i=t.from(e,"hex").toString("utf8"),r=i.split("/////");r.length>0?(n=r[r.length-1].split(":")[0],o=r[r.length-1].split(":")[1],r.pop()):(n=i.split(":")[0],o=i.split(":")[1]);let c=this.newFavoriteFolder;"object"!=typeof c&&void 0!==c&&null!=typeof c||(c=""),this.q.os.utilities.inArray(this.q.os.ocean.dolphin.getChannelNameList(),n)?this.ui.showSnack("Channel Exists!","Oops",{duration:1e3}):(this.q.os.ocean.dolphin.removeIncomingFavoriteRequest(n.split("-----")[0].split("-")[1]),this.q.os.social.profile.addFavorite(n.split("-----")[0].split("-")[1]),console.log("ChannelFavorites: Adding Favorite: ",n.split("-----")[0].split("-")[1]),yield this.q.os.channel.import(n,r,"",o,0),this.createCompleteAndClose())}))}rejectRequest(t){this.q.os.ocean.dolphin.removeIncomingFavoriteRequest(t),this.saveExpandedNodes(),this.loadChannels(this.favoriteFolderList),this.q.os.commitNow()}newInviteImportFoldersChanged(){}goToProfile(t){this.ngZone.run(()=>this.router.navigate(["/social/profile/"+t]))}updateNames(){return Object(o.a)(this,void 0,void 0,(function*(){let t=[];for(let e of this.flatChannelNeeded)if(t.indexOf(e)<0){let n=yield this.q.os.social.getAliasFromDirectChannel(e);console.log(n),t.push(e),this.flatChannelNameList[e]=n,this.pk[e]=yield this.q.os.social.getPubKeyFromDirectChannel(e)}for(let e of this.flatChannelNeeded2)if(t.indexOf(e)<0){let n=yield this.q.os.social.getAliasFromDirectChannel2(e);console.log(n),t.push(e),this.flatChannelNameList2[e]=n,this.pk[e]=yield this.q.os.social.getPubKeyFromDirectChannel(e)}this.cd.detectChanges()}))}getAliasFromDirectChannel(t){return this.flatChannelNeeded.push(t),void 0!==this.flatChannelNameList[t]?this.flatChannelNameList[t]:t}getAliasFromDirectChannel2(t){return this.flatChannelNeeded2.push(t),void 0!==this.flatChannelNameList2[t]?this.flatChannelNameList2[t]:t}getPubKeyFromDirectChannel(t){return setTimeout(()=>Object(o.a)(this,void 0,void 0,(function*(){this.pubKeyStore[t]=yield this.q.os.social.getPubKeyFromDirectChannel(t)})),2e3),null!=this.pubKeyStore[t]?this.pubKeyStore[t]:"/"}selectProfile(t){this.ngZone.run(()=>this.router.navigate(["/social/profile/"+t]))}goToChannel(t){this.q.os.channel.select(t),this.ngZone.run(()=>this.router.navigate(["/messages"]))}goToProfileByChannel(t){return Object(o.a)(this,void 0,void 0,(function*(){let e=yield this.q.os.social.getPubKeyFromDirectChannel(t);this.pk[t]=e,this.ngZone.run(()=>this.router.navigate(["/social/profile/"+e]))}))}}return e.\u0275fac=function(t){return new(t||e)(d.Sb(g.c),d.Sb(d.C),d.Sb(d.h),d.Sb($),d.Sb(u.a),d.Sb(h.l),d.Sb(h.y),d.Sb(b.a))},e.\u0275cmp=d.Mb({type:e,selectors:[["social-profile-favorites"]],viewQuery:function(t,e){var n;1&t&&(d.Mc(p.d,!0),d.Mc(k,!0),d.Mc(w,!0),d.Mc(F,!0),d.Mc(S,!0)),2&t&&(d.uc(n=d.gc())&&(e.contextMenu=n.first),d.uc(n=d.gc())&&(e.emptyItem=n.first),d.uc(n=d.gc())&&(e.qrPop=n.first),d.uc(n=d.gc())&&(e.createPop=n.first),d.uc(n=d.gc())&&(e.newFavoriteFolderPop=n.first))},features:[d.Eb([$])],decls:22,vars:10,consts:[["createPop",""],["qrPop",""],["import",""],["newFavoriteFolder",""],[2,"width","169px","color","#598adb"],["matInput","","placeholder","Search",3,"input"],["outline","","size","small",1,"addChannelButton",3,"nbContextMenu"],["icon","plus-outline",2,"font-size","18px","width","auto"],["class","favoriteRequest",4,"ngFor","ngForOf"],[3,"dataSource","treeControl"],["matTreeNodeToggle","","matTreeNodePadding","",3,"ngClass","dragover","dragend","drop",4,"matTreeNodeDef"],["matTreeNodePadding","",3,"ngClass","dragover","dragend","drop",4,"matTreeNodeDef","matTreeNodeDefWhen"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],["contextMenu","matMenu"],["matMenuContent",""],["emptyItem",""],[2,"color","goldenrod"],[2,"padding","20px"],[2,"width","80%","margin-left","10px",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[2,"padding","20px","padding-bottom","34px","padding-top","0px","color","white !important"],["matInput","","placeholder","Channel Name","value","","name","newChannelName",2,"color","black","background-color","goldenrod","padding","7px",3,"ngModel","ngModelChange"],["mat-stroked-button","","color","primary",2,"margin-right","20px","border","1px solid #ffffff24",3,"click"],["mat-stroked-button","","color","primary",2,"border","1px solid #ffffff24",3,"click"],[3,"value"],[1,"qrScanWrapper"],[3,"torch","device","formats","tryHarder","deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible"],[2,"width","19%"],[3,"value","valueChange","selectionChange"],["matInput","","placeholder","Invite Code","value","","name","inviteCodeHex",2,"color","black","background-color","goldenrod","padding","7px","margin-right","5%","width","80%",3,"ngModel","ngModelChange"],["icon","camera-outline",1,"deleteCode","scanQRCode",3,"click"],["matInput","","placeholder","Folder Name","value","","name","newFavoriteFolderName",2,"color","black","background-color","goldenrod","padding","7px",3,"ngModel","ngModelChange"],[1,"favoriteRequest"],["class","favoriteRequestText",3,"click",4,"ngIf"],["icon","close-square-outline",2,"color","#ff0000bd","float","right","cursor","pointer",3,"click"],["icon","checkmark-square-2-outline",2,"color","#16eb16","float","right","cursor","pointer",3,"click"],[1,"favoriteRequestText",3,"click"],["matTreeNodeToggle","","matTreeNodePadding","",3,"ngClass","dragover","dragend","drop"],[3,"class","routerLink","routerLinkActive","click",4,"ngIf"],[3,"class","click",4,"ngIf"],[3,"routerLink","routerLinkActive","click"],["icon","shake-outline"],["draggable","true",1,"checklist-leaf-node",3,"dragstart"],[1,"nodeContent","station",2,"width","100%",3,"ngClass"],[3,"click"],["icon","question-mark-outline"],[1,"nodeContent","unknown",2,"width","100%",3,"ngClass"],["matTreeNodePadding","",3,"ngClass","dragover","dragend","drop"],[1,"treeNodeContainerFolder",3,"contextmenu"],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],["icon","folder-outline"],[1,"nodeContent",3,"ngClass"],["mat-menu-item","",3,"click"]],template:function(t,e){if(1&t&&(d.Gc(0,B,15,3,"ng-template",null,0,d.Hc),d.Gc(2,I,9,4,"ng-template",null,1,d.Hc),d.Gc(4,T,24,6,"ng-template",null,2,d.Hc),d.Gc(6,N,15,3,"ng-template",null,3,d.Hc),d.Yb(8,"mat-form-field",4),d.Yb(9,"input",5),d.fc("input",(function(t){return e.filterChanged(t.target.value)})),d.Xb(),d.Xb(),d.Yb(10,"button",6),d.Tb(11,"nb-icon",7),d.Xb(),d.Gc(12,X,5,2,"div",8),d.Yb(13,"mat-tree",9),d.Gc(14,V,3,3,"mat-tree-node",10),d.Gc(15,G,9,7,"mat-tree-node",11),d.Xb(),d.Tb(16,"div",12),d.Yb(17,"mat-menu",null,13),d.Gc(19,H,4,0,"ng-template",14),d.Xb(),d.Tb(20,"span",null,15)),2&t){const t=d.vc(18);d.Fb(10),d.pc("nbContextMenu",e.items),d.Fb(2),d.pc("ngForOf",e.incomingFavoriteRequestList),d.Fb(1),d.pc("dataSource",e.dataSource)("treeControl",e.treeControl),d.Fb(2),d.pc("matTreeNodeDefWhen",e.hasChild),d.Fb(1),d.Dc("left",e.contextMenuPosition.x)("top",e.contextMenuPosition.y),d.pc("matMenuTriggerFor",t)}},directives:[f.b,m.a,h.i,h.o,C.l,l.a,l.f,p.d,p.e,p.a,h.d,h.f,h.c,x.a,P.b,P.j,P.m,h.e,v.a,O.g,M.a,C.m,l.e,l.h,l.g,C.k,y.a,g.d,g.e,_.a,p.b],styles:["button[nbTreeGridRowToggle][_ngcontent-%COMP%]{background:transparent;border:none;padding:0}.search-label[_ngcontent-%COMP%]{display:block}.search-input[_ngcontent-%COMP%]{background:transparent;color:#fff;padding:5px;font-size:12px;width:100%;margin-top:1rem;margin-bottom:1rem;width:78%;margin-left:1%}.addChannelButton[_ngcontent-%COMP%]{color:rgba(134,116,183,.7490196078431373);margin-left:5%;position:relative;top:1px;background-color:#45267d;border:1px solid;border-radius:5px;padding:4px;opacity:.7}.nb-column-name[_ngcontent-%COMP%]{width:80%}.nb-column-items[_ngcontent-%COMP%]{width:20%}.favoriteRequest[_ngcontent-%COMP%]{width:100%;overflow:hidden;white-space:nowrap;padding:10px;border-radius:5px;background:rgba(120,14,62,.6392156862745098);font-family:Ubuntu;font-size:14px;margin-bottom:5px}.favoriteRequestText[_ngcontent-%COMP%]{width:80%;cursor:pointer;overflow:hidden;width:66%;float:left;text-overflow:ellipsis;color:hsla(0,0%,100%,.8313725490196079)!important}.scanQRCode[_ngcontent-%COMP%]{font-size:37px;color:#315cdf;cursor:pointer}.scanQRCode[_ngcontent-%COMP%]:hover{color:#4a81e6}[_nghost-%COMP%]   nb-layout-header[_ngcontent-%COMP%]     nav{justify-content:flex-end}.mat-tree[_ngcontent-%COMP%], .mat-tree-node[_ngcontent-%COMP%]{background:transparent}.mat-tree-node[_ngcontent-%COMP%]{overflow:visible;cursor:move}.drop-above[_ngcontent-%COMP%]{border-top:10px solid #2196f3;margin-top:-10px}.drop-below[_ngcontent-%COMP%]{border-bottom:10px solid #2196f3;margin-bottom:-10px}.drop-center[_ngcontent-%COMP%]{background-color:#a9a9a9}.drag-start[_ngcontent-%COMP%]{background-color:#1565c0;color:#f0fff0}.treeNodeContainerFolder[_ngcontent-%COMP%]{background-color:rgba(131,119,230,.058823529411764705);border-radius:5px;padding:0 16px 0 0;margin:0;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.treeNodeContainerSingle[_ngcontent-%COMP%]{background-color:rgba(69,39,128,.3686274509803922)}.mat-tree[_ngcontent-%COMP%]{width:227px;left:14px;top:190px;bottom:40px;position:fixed;overflow:scroll}.mat-tree[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.mat-tree[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(0,0,0,.3)}.mat-tree[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:rgba(78,132,229,.5607843137254902);outline:0}.mat-tree[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:none!important}.emptyFolder[_ngcontent-%COMP%]{display:none}.mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{line-height:20px}.qrScanWrapper[_ngcontent-%COMP%]{min-width:20px;max-height:80vh;max-width:37vw}.mat-tree[_ngcontent-%COMP%]{z-index:999;max-width:227px;left:-1px;padding-right:10px;position:relative;top:0;margin-bottom:40px;overflow:hidden!important;overflow-y:auto!important}.mat-tree-node[_ngcontent-%COMP%]{font-family:Ubuntu;color:#4982e8;letter-spacing:.02rem}.treeNodeContainerSingle[_ngcontent-%COMP%]{border-radius:5px;padding:6px 10px 6px 15px;margin:0;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:rgba(71,129,233,.9882352941176471)!important;font-size:16px;font-family:Ubuntu;cursor:pointer;background:#262246}.treeNodeContainerSingle[_ngcontent-%COMP%]:focus{outline:0;border:0}.nodeContent.station[_ngcontent-%COMP%], .nodeContent.unknown[_ngcontent-%COMP%]{position:relative;top:-1px}"]}),e})()}).call(this,n("tjlA").Buffer)}}]);